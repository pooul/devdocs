# 民生银行产品 CMBC bank

## 分销易 CMBC Easy distribution

分销易是民生银行产品，可以帮助平台商户解决经销商大额入金并识别来路的需求，具体咨询对接商户经理介绍民生银行全国任一网点进行开通，开通后普尔平台配置后即可使用。

开通分销易后可帮助平台商户实现所有入驻商户使用管理后台或是API接口在民生银行系统中创建平台商户子账户，子商户与入驻商户唯一关联，使用网银转账给子账户成功后可以通过在管理后台查询到入驻商户入账信息，或是发送转账成功通知信息给平台商户提供的网址。

### 网银转账入账通知 CMBC fund accounting notify

> 通知内容解密后的格式

```json
{
    "_id": "5b7e960b01c911472ce3b206",
    "created_at": 1535022603,
    "currencyCategory": "",
    "dcFlag": "2",
    "draweeAccName": "白云006",
    "draweeAccNo": "6226223301229640",
    "draweeAccType": "",
    "draweePartyId": "305100000013",
    "draweePartyName": "中国民生银行",
    "fundAcc": "9902000003145455",
    "merchantNum": "3300000900001182",
    "merchant_id": "3500395694632388",
    "payeeAccName": "倪川林龙帅",
    "payeeAccNo": "9902000003145455",
    "payeeAccType": "P",
    "payeePartyId": "",
    "payeePartyName": "",
    "platform_merchant_id": "2339779661268962",
    "postscript": "手机转账",
    "reqSeq": "310002018082300294068365440E5F75",
    "summary": "手机转账",
    "tranDate": "20180823",
    "tranTime": "182048533",
    "tran_amount_fee": 1155,
    "tran_at": 1535019648,
    "merchant_info": {
        "merchant_id": "3500395694632388",
        "business_short_name": "版本环境测试-囧囧",
        "corporate_full_name": null
    }
}
```

在接收到入驻商户网银转账入账后，普尔平台会往平台商户配置的网址发送通知，通知内容为JWT文本，平台商户在接收到通知后需要使用普尔公钥解密并验签。平台商户需要接收处理，并需要响应字符串"success"（大小写皆可）。

对后台通知交互时，如果Pooul收到商户的应答不是成功或超时，系统认为通知失败，系统会通过一定的策略定期重新发起通知，尽可能提高通知的成功率，但系统不保证通知最终能成功。 （通知频率为15/15/30/180/1800/1800/1800/1800/3600，单位：秒）

注意：同样的通知可能会多次发送给商户系统。商户系统必须能够正确处理重复的通知。 推荐的做法是，当收到通知进行处理时，首先检查对应业务数据的状态，判断该通知是否已经处理过，如果没有处理过再进行处理，如果处理过直接返回结果成功。在对业务数据进行状态检查和处理之前，要采用数据锁进行并发控制，以避免函数重入造成的数据混乱。





