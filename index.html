
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Pooul开发者中心</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-12044506-16"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-12044506-16');
    </script>

  </head>

  <body class="index" data-languages="[&quot;shell&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="shell">cURL</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#5f83e7f6a1" class="toc-h1 toc-link" data-title="">基础</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#d0ca8bd887" class="toc-h2 toc-link" data-title="">文档简介</a>
                  </li>
                  <li>
                    <a href="#4e5ec025a2" class="toc-h2 toc-link" data-title="">阅读对象</a>
                  </li>
                  <li>
                    <a href="#49469dfec8" class="toc-h2 toc-link" data-title="">名词解释</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#e143d8ad12" class="toc-h3 toc-link" data-title="">关于商户</a>
                          </li>
                          <li>
                            <a href="#d3695129bf" class="toc-h3 toc-link" data-title="">关于费率</a>
                          </li>
                          <li>
                            <a href="#abf6da0501" class="toc-h3 toc-link" data-title="">关于支付</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#2e981dc65c" class="toc-h2 toc-link" data-title="">测试商户</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#e0ae39093e" class="toc-h3 toc-link" data-title="">普通商户</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#c97d67a28a" class="toc-h2 toc-link" data-title="">协议规则</a>
                  </li>
                  <li>
                    <a href="#4194e6ee88" class="toc-h2 toc-link" data-title="">参数约定</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#b36db63db4" class="toc-h3 toc-link" data-title="">涉及时间</a>
                          </li>
                          <li>
                            <a href="#6122bf692c" class="toc-h3 toc-link" data-title="">涉及金额</a>
                          </li>
                          <li>
                            <a href="#47e4f4f6b5" class="toc-h3 toc-link" data-title="">涉及费率</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#2fd51d31a7" class="toc-h2 toc-link" data-title="">状态码</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#6d3f20bdee" class="toc-h3 toc-link" data-title="">商户状态码</a>
                          </li>
                          <li>
                            <a href="#trade_state" class="toc-h3 toc-link" data-title="trade_state">支付状态码 trade_state</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#authenticate" class="toc-h1 toc-link" data-title="authenticate">认证 Authenticate</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#login" class="toc-h2 toc-link" data-title="login">Login</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#1-get-user" class="toc-h3 toc-link" data-title="1-get-user">1. 获得登录用户 Get user</a>
                          </li>
                          <li>
                            <a href="#2-authorization" class="toc-h3 toc-link" data-title="2-authorization">2. 获取 Authorization</a>
                          </li>
                          <li>
                            <a href="#3-authorization" class="toc-h3 toc-link" data-title="3-authorization">3. 提交请求头带上 Authorization</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#rsa" class="toc-h2 toc-link" data-title="rsa">RSA</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#1-rsa" class="toc-h3 toc-link" data-title="1-rsa">1. 生成RSA密钥</a>
                          </li>
                          <li>
                            <a href="#2" class="toc-h3 toc-link" data-title="2">2. 上传商户公钥</a>
                          </li>
                          <li>
                            <a href="#3" class="toc-h3 toc-link" data-title="3">3. 获取普尔公钥</a>
                          </li>
                          <li>
                            <a href="#4-jwt" class="toc-h3 toc-link" data-title="4-jwt">4. 使用JWT生成请求数据</a>
                          </li>
                          <li>
                            <a href="#5-token-http-post-content-type-text-plain-url" class="toc-h3 toc-link" data-title="5-token-http-post-content-type-text-plain-url">5.将编码后的token通过HTTP POST方式（Content-Type: text/plain）发送到相应接口url。</a>
                          </li>
                          <li>
                            <a href="#6-jwt" class="toc-h3 toc-link" data-title="6-jwt">6. 使用普尔公钥验签 JWT</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#pay" class="toc-h1 toc-link" data-title="pay">收款 Pay</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pay-order" class="toc-h2 toc-link" data-title="pay-order">统一支付 Pay order</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#common-micro" class="toc-h3 toc-link" data-title="common-micro">统一反扫支付 common.micro</a>
                          </li>
                          <li>
                            <a href="#wechat-scan" class="toc-h3 toc-link" data-title="wechat-scan">微信扫码支付 wechat.scan</a>
                          </li>
                          <li>
                            <a href="#wechat-jsapi" class="toc-h3 toc-link" data-title="wechat-jsapi">微信公众号支付 wechat.jsapi</a>
                          </li>
                          <li>
                            <a href="#wechat-jsminipg" class="toc-h3 toc-link" data-title="wechat-jsminipg">微信小程序支付 wechat.jsminipg</a>
                          </li>
                          <li>
                            <a href="#app-wechat-app" class="toc-h3 toc-link" data-title="app-wechat-app">微信APP支付 wechat.app</a>
                          </li>
                          <li>
                            <a href="#h5-wechat-wap" class="toc-h3 toc-link" data-title="h5-wechat-wap">微信H5支付 wechat.wap</a>
                          </li>
                          <li>
                            <a href="#alipay-scan" class="toc-h3 toc-link" data-title="alipay-scan">支付宝扫码支付 alipay.scan</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#query" class="toc-h2 toc-link" data-title="query">查询订单 Query</a>
                  </li>
                  <li>
                    <a href="#close" class="toc-h2 toc-link" data-title="close">关闭订单 Close</a>
                  </li>
                  <li>
                    <a href="#reverse" class="toc-h2 toc-link" data-title="reverse">撤销订单 Reverse</a>
                  </li>
                  <li>
                    <a href="#refund" class="toc-h2 toc-link" data-title="refund">申请退款 Refund</a>
                  </li>
                  <li>
                    <a href="#refund-query" class="toc-h2 toc-link" data-title="refund-query">退款查询 Refund query</a>
                  </li>
                  <li>
                    <a href="#pay-notify" class="toc-h2 toc-link" data-title="pay-notify">支付结果通知 Pay notify</a>
                  </li>
                  <li>
                    <a href="#refund-notify" class="toc-h2 toc-link" data-title="refund-notify">退款结果通知 Refund notify</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#accounting" class="toc-h1 toc-link" data-title="accounting">账务 Accounting</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pay-orders" class="toc-h2 toc-link" data-title="pay-orders">查询交易记录 Pay orders</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#pay-order-search" class="toc-h3 toc-link" data-title="pay-order-search">搜索交易明细 Pay order search</a>
                          </li>
                          <li>
                            <a href="#7c89f05a33" class="toc-h3 toc-link" data-title="">获取单笔订单详情</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#summary" class="toc-h2 toc-link" data-title="summary">获取交易汇总 Summary</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#today-summary" class="toc-h3 toc-link" data-title="today-summary">实时汇总 Today summary</a>
                          </li>
                          <li>
                            <a href="#day-summary" class="toc-h3 toc-link" data-title="day-summary">日汇总 Day summary</a>
                          </li>
                          <li>
                            <a href="#month-summary" class="toc-h3 toc-link" data-title="month-summary">月汇总 Month summary</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#downloads-bills" class="toc-h2 toc-link" data-title="downloads-bills">下载对账单 Downloads bills</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#day-bills" class="toc-h3 toc-link" data-title="day-bills">日对账单 Day bills</a>
                          </li>
                          <li>
                            <a href="#049e654a9b" class="toc-h3 toc-link" data-title="">对账单格式</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#tenant-merchants" class="toc-h1 toc-link" data-title="tenant-merchants">入驻商户 Tenant Merchants</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#merchant-level" class="toc-h2 toc-link" data-title="merchant-level">商户层级 Merchant Level</a>
                  </li>
                  <li>
                    <a href="#merchant-manage" class="toc-h2 toc-link" data-title="merchant-manage">商户管理 Merchant manage</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fcbd093292" class="toc-h3 toc-link" data-title="">创建</a>
                          </li>
                          <li>
                            <a href="#711363c424" class="toc-h3 toc-link" data-title="">查询</a>
                          </li>
                          <li>
                            <a href="#c9c77517fe" class="toc-h3 toc-link" data-title="">修改</a>
                          </li>
                          <li>
                            <a href="#3755f56f2f" class="toc-h3 toc-link" data-title="">删除</a>
                          </li>
                          <li>
                            <a href="#f04090805c" class="toc-h3 toc-link" data-title="">搜索</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#bank-cards" class="toc-h2 toc-link" data-title="bank-cards">银行卡 Bank cards</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fcbd093292-2" class="toc-h3 toc-link" data-title="">创建</a>
                          </li>
                          <li>
                            <a href="#711363c424-2" class="toc-h3 toc-link" data-title="">查询</a>
                          </li>
                          <li>
                            <a href="#c9c77517fe-2" class="toc-h3 toc-link" data-title="">修改</a>
                          </li>
                          <li>
                            <a href="#3755f56f2f-2" class="toc-h3 toc-link" data-title="">删除</a>
                          </li>
                          <li>
                            <a href="#43674fca93" class="toc-h3 toc-link" data-title="">设置默认银行卡</a>
                          </li>
                          <li>
                            <a href="#97b5cbd70e" class="toc-h3 toc-link" data-title="">查询商户所有银行卡</a>
                          </li>
                          <li>
                            <a href="#729337a1e1" class="toc-h3 toc-link" data-title="">启用禁用</a>
                          </li>
                      </ul>
                  </li>
                  <li>
                    <a href="#a92269beba" class="toc-h2 toc-link" data-title="">费率管理</a>
                      <ul class="toc-list-h3">
                          <li>
                            <a href="#fcbd093292-3" class="toc-h3 toc-link" data-title="">创建</a>
                          </li>
                          <li>
                            <a href="#711363c424-3" class="toc-h3 toc-link" data-title="">查询</a>
                          </li>
                          <li>
                            <a href="#c9c77517fe-3" class="toc-h3 toc-link" data-title="">修改</a>
                          </li>
                          <li>
                            <a href="#3755f56f2f-3" class="toc-h3 toc-link" data-title="">删除</a>
                          </li>
                          <li>
                            <a href="#2801d5939d" class="toc-h3 toc-link" data-title="">查询所有</a>
                          </li>
                      </ul>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#f8519014aa" class="toc-h1 toc-link" data-title="">附录</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#pay-type" class="toc-h2 toc-link" data-title="pay-type">Pay Type 支付类型编码</a>
                  </li>
                  <li>
                    <a href="#edde394695" class="toc-h2 toc-link" data-title="">网银互联联行号</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#faq" class="toc-h1 toc-link" data-title="faq">常见问题 FAQ</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#5537115284" class="toc-h2 toc-link" data-title="">普通商户接入流程</a>
                  </li>
                  <li>
                    <a href="#585a237901" class="toc-h2 toc-link" data-title="">平台商户接入流程</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#update-log" class="toc-h1 toc-link" data-title="update-log">更新日志 Update log</a>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='http://www.pooul.com/'>返回网站首页</a></li>
            <li>© Pooul 2018</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='5f83e7f6a1'>基础</h1><h2 id='d0ca8bd887'>文档简介</h2>
<p>Pooul API 采用 REST 风格设计。所有接口请求地址都是可预期的以及面向资源的。使用规范的 HTTP 响应代码来表示请求结果的正确或错误信息。使用 HTTP 内置的特性，如 HTTP Authentication 和 HTTP 请求方法让接口易于理解。所有的 API 请求都会以规范友好的 JSON 对象格式返回（包括错误信息）。</p>
<h2 id='4e5ec025a2'>阅读对象</h2>
<p>本文阅读对象：商户系统（在线购物平台、人工收银系统、自动化智能收银系统或其他）集成普尔系统涉及的技术架构师，研发工程师，测试工程师，系统运维工程师。</p>
<h2 id='49469dfec8'>名词解释</h2><h3 id='e143d8ad12'>关于商户</h3>
<ul>
<li>平台商户：指平台商户或集团商户</li>
<li>入驻商户：平台商户下属商户</li>
<li>普通商户：不属于平台商户与入驻商户的其他普通商户类型</li>
<li>终端商户：指发起交易的商户，可以是普通商户、也可以是入驻商户，平台商户不允许发起交易</li>
</ul>
<h3 id='d3695129bf'>关于费率</h3>
<ul>
<li>结算费率：指结算时支付渠道或银行需扣除的费率</li>
<li>协议费率：指商户与普尔合作签约的费率 </li>
</ul>
<h3 id='abf6da0501'>关于支付</h3>
<ul>
<li>支付方式：如：微信支付、支付宝、银联分期</li>
<li>支付类型：如：正扫、反扫、公众号、APP、H5等场景</li>
</ul>
<h2 id='2e981dc65c'>测试商户</h2><h3 id='e0ae39093e'>普通商户</h3>
<ul>
<li>商户平台账号：alex，</li>
<li>密码：123</li>
<li>测试商户号：5399355381712172</li>
</ul>

<p>测试证书私钥：</p>

<p><code>
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAw3Djq8ynUbfDfBMVWxMPVtogSUXwtPssniinXuoAmiTMRhkE
cWq84xsrFzBl+s13DPvb5Lr172e8bB75lFk2DD7QVNFfm6eBVbuUy0Y9Q5bW6CLz
5Yu/ZG6//ai94f6WzN3cnkS4x71Ihge3uaRWRf1UzqAfaq2vbaABNi5SYWsQCzYv
nxoG4PYQtrc/rzuHERKsx7QWlxFmWXaxJHGvF8cr/+GXUxwjeoRB0n1mMzxhjlFO
m200iJ65mFs+HqS0JpZh4HTdxru5WZe80vv+1AuXO9/AVtZLc1BWrTGWLfTe1ySf
KzxEQqLq8ls0hS9V1MNYlD9ha1B/480zrGZAnwIDAQABAoIBAE2w3pA4tnqhljAI
VgDyPrLD2vnFt7356u6kMoRkeQDNh/aFk2KSj6un7SU2tBNTAfRDWlI+j+0vS5Of
bI8wN2/+uEo/QMZbe+pcuvVjYo8vsxZsbo/dUaPW8rMfFPx1e/TMbRrtLpcYA3Bk
OQCu9yyzW7cXp+V8TbRCWrjzCQR4HMqnUExyDOyJflatQ2641Q4Q2YaAF1NCxJyq
uTyxAPdpvvQ9SAj7eXsF1l0OIfW/4aACrOuvg9aOwPhbrKaT6s0dk8fKhfAm5rAu
Q2tsubzwA5D+mJQqjVwnRHGiN+4GuIcAynevj4IdkznOP81wG/ksP34MkQpFnJ4j
pBZxvQECgYEA6qFWBk9XQpYMVecS4RWvvRyolbKF6HgVEp0ji8euocLIfgJWEFXK
Eb+Ood3NNSff4SpjpGOuzXBbyZiimWAQdzuo4LXwHLfd0cHOW07Lqx7UXsm5+wVp
rzNuZzkQMtRqNqXAfSAdBziSfiMPSIZanqW3zv59oSHLengAAAI4zmECgYEA1T3Q
BFO1J0duKacA6hjQ+DqOkfWuLo9NOFhMK4oFOiMCoFTrgoaU+7HEwPvWSe0d7rku
HhuivGhhha9Viw41Gpfo5Z5oymL5McW52+YPLjugAV5G2dkT68c/C6CPMZYB7PYk
4AtCYsvA5VP6qRmFQ6acm/822kela5RxAeIDbv8CgYEA0dzq8AvpdfJ2KCPePBvE
q/dFR1h989fsqVCKac16gs+RuzvltQi3DDb1ogydLu1yj5j1tSVARhs4zlHLJjrJ
n4xqWkwB7/3511Ntezg4bd/OftYals9Zn072cjeVKJHcSvLpAEJIFJxiU5aSZgFe
bsa1aN0yi3yJ3woUne1e2CECgYEA0qobXHr6B5EI4ztqqtrTb7gh607Ewpit2BFb
RtQ278VwrcbXV/7vJmzsDR9/B0+q95GYXwQ8VFfmqHScVSE3E0uqOVay/eajeyl0
wSraKnmbTF7ALi3IAXG49hqr/HfO9TQDIBffgMz8h1Lc2rwsrLXoGDEdFq4bXVmr
/wkzDS8CgYArNrvZ04EfGTdlgQLcxgGKhQcTibz9/QUkJ/RZPOnCxZFWwgfDIoAQ
99IthRkneZglfhm/R5Znn1t65B8IEXejTZcYN11EugqI1/cOkJ/PySmtUMaeD+/o
Am6x0mszgYThpY+2mM2w2hWTirUbvXS07LbCN0R29fT/a88Kwd2gGQ==
-----END RSA PRIVATE KEY-----
</code></p>
<h2 id='c97d67a28a'>协议规则</h2>
<ul>
<li>传输方式：为保证交易安全性，采用HTTPS传输</li>
<li>提交方式：采用 Post、Get、put、delete 方法提交</li>
<li>数据格式：提交和返回数据都为json格式</li>
<li>字符编码：统一采用UTF-8字符编码</li>
<li>签名算法：RSA，JWT加密传输</li>
<li>签名要求：请求和接收数据均需要校验签名，详细方法请参考安全规范-签名算法</li>
<li>证书要求：调用申请退款、撤销订单接口需要商户证书</li>
<li>判断逻辑：先判断协议字段返回，再判断业务返回，最后判断交易状态</li>
</ul>

<aside class="notice">
You must replace `meowmeowmeow` with your personal API key.
</aside>
<h2 id='4194e6ee88'>参数约定</h2><h3 id='b36db63db4'>涉及时间</h3>
<ul>
<li>所有涉及到时间的地方都使用Unix时间戳 </li>
<li>时间戳：自1970年1月1日 0点0分0秒以来的秒数。注意：部分系统取到的值为毫秒级，需要转换成秒(10位数字)。</li>
</ul>
<h3 id='6122bf692c'>涉及金额</h3>
<ul>
<li>所有涉及到金额的单位都是分 </li>
<li>最小的单位是 1 分，都为整数，不能有小数出现</li>
</ul>
<h3 id='47e4f4f6b5'>涉及费率</h3>
<ul>
<li>费率的格式为int，万分之，比如：30代表万分之30，千分之3，百分之0.3</li>
</ul>
<h2 id='2fd51d31a7'>状态码</h2><h3 id='6d3f20bdee'>商户状态码</h3>
<table><thead>
<tr>
<th>status</th>
<th>status_desc</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>审核通过</td>
<td>上游渠道审核成功，并配置好路由等相关交易信息，商户可以正常交易</td>
</tr>
<tr>
<td>1</td>
<td>入驻申请</td>
<td>代理商通过接口或后台提交成功商户资料至普尔商户系统，等待普尔提交至上游渠道</td>
</tr>
<tr>
<td>2</td>
<td>审核中</td>
<td>普尔提交商户资料至上游渠道，等待上游渠道审核</td>
</tr>
<tr>
<td>3</td>
<td>审核失败</td>
<td>商户审核失败（a.上游渠道返回审核失败，b.普尔审核失败）</td>
</tr>
<tr>
<td>4</td>
<td>商户停用</td>
<td>商户状态停用（a.上游渠道停用商户，b. 普尔停用商户）</td>
</tr>
</tbody></table>
<h3 id='trade_state'>支付状态码 trade_state</h3>
<table><thead>
<tr>
<th>trade_state</th>
<th>说明</th>
</tr>
</thead><tbody>
<tr>
<td>0</td>
<td>交易成功</td>
</tr>
<tr>
<td>1</td>
<td>转入退款：支付成功后调用退款接口转入退款，只代表退款业务提交成功，具体退款状态请调用退款查询接口</td>
</tr>
<tr>
<td>2</td>
<td>未支付：订单未支付</td>
</tr>
<tr>
<td>3</td>
<td>已关闭：订单已关闭</td>
</tr>
<tr>
<td>4</td>
<td>已冲正</td>
</tr>
<tr>
<td>5</td>
<td>已撤销：用于反扫，未确认状态的订单使用撤销订单接口进行撤销，如果未付款订单则会关闭订单，已付款订单会进行退款</td>
</tr>
<tr>
<td>6</td>
<td>支付中：用于反扫，当用户需要输入密码时的状态</td>
</tr>
<tr>
<td>7</td>
<td>支付失败：交易结果确认失败</td>
</tr>
</tbody></table>
<h1 id='authenticate'>认证 Authenticate</h1><h2 id='login'>Login</h2><h3 id='1-get-user'>1. 获得登录用户 Get user</h3>
<p>请联系对接的商务经理</p>
<h3 id='2-authorization'>2. 获取 Authorization</h3>
<blockquote>
<p>请求示例 </p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST /web/user/session/login_name <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-d<span class="s1">' {
    "login_name":"alex",
    "password":"123" 
}
</span></code></pre>
<blockquote>
<p>响应：Header</p>
</blockquote>
<pre class="highlight plaintext"><code>Authorization: d991da83657a01ae4640a61828b546934d05de37
</code></pre>
<blockquote>
<p>响应：Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ns::User::PooulSuperUser"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1526979441</span><span class="p">,</span><span class="w">
        </span><span class="s2">"curr_merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9609932494323355"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"login_name"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"abc"</span><span class="w">
        </span><span class="p">],</span><span class="w">
        </span><span class="s2">"sex"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1529749887</span><span class="p">,</span><span class="w">
        </span><span class="s2">"user_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"wechat_binded"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>login_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>登录名，可以为手机号码、用户名、邮箱任意一种</td>
</tr>
<tr>
<td>password  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>登录密码</td>
</tr>
</tbody></table>

<p>使用用户名与密码调用登录接口获取 Authorization, 在登录成功以后，下发 Authorization 在http头</p>

<ul>
<li>Authorization 默认有效期为 30 分钟，如果用户在使用的情况下，</li>
<li>15 分钟时后端会下发新的 Authorization，此时需要使用新的 Authorization 来调用，</li>
<li>如果持续 30 分钟以上没有任何操作，重新操作 Authorization 会失效需要重新登录获取新的 Authorization</li>
</ul>
<h3 id='3-authorization'>3. 提交请求头带上 Authorization</h3>
<blockquote>
<p>Request（post、put、get、delete等）URL</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST https://json.pooulcloud.cn/cms/merchants <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d<span class="s1">' {
    #请求参数
}'</span>
</code></pre>
<p>请求使用Login鉴权的接口时需要在请求头中带上 Authorization </p>
<h2 id='rsa'>RSA</h2><h3 id='1-rsa'>1. 生成RSA密钥</h3>
<blockquote>
<p>生成 PKCS#1 2048 位私钥</p>
</blockquote>
<pre class="highlight plaintext"><code>OpenSSL&gt;genrsa -out rsa_private.pem 2048  #默认生成PKCS#1的私钥，2048表示私钥的长度
</code></pre>
<blockquote>
<p>从私钥导出对应的公钥，默认此公钥是PKCS#8的</p>
</blockquote>
<pre class="highlight plaintext"><code>OpenSSL&gt;rsa -in rsa_private.pem -pubout -out rsa_public.pem  
</code></pre>
<blockquote>
<p>Java开发者需要将私钥转换成PKCS8格式</p>
</blockquote>
<pre class="highlight plaintext"><code>OpenSSL&gt;pkcs8 -topk8 -inform PEM -in rsa_private.pem -outform PEM -nocrypt -out rsa_private_pkcs8.pem  
</code></pre>
<p>我们建议可以使用OpenSSL(https://www.openssl.org/) 工具命令，或取得信任的密钥生成工具来生成密钥。</p>

<p>经过示例中的步骤，开发者可以在当前文件夹中（OpenSSL运行文件夹），看到 rsa_private.pem（开发者RSA私钥，非Java语言适用）、rsa_private_pkcs8.pem（pkcs8格式开发者RSA私钥，Java语言适用）和 rsa_public.pem（开发者RSA公钥）3个文件。开发者将私钥保留，上传商户公钥给普尔，用于验证签名。</p>

<aside class="notice">
对于使用Java的开发者，需将生成的pkcs8格式的私钥去除头尾、换行和空格，作为私钥填入代码中，对于.NET和PHP的开发者来说，无需进行pkcs8命令行操作。
</aside>

<p>标准的私钥文件示例（PHP、.NET使用）</p>

<p><code>
-----BEGIN RSA PRIVATE KEY-----
MIIEpAIBAAKCAQEAw3Djq8ynUbfDfBMVWxMPVtogSUXwtPssniinXuoAmiTMRhkE
cWq84xsrFzBl+s13DPvb5Lr172e8bB75lFk2DD7QVNFfm6eBVbuUy0Y9Q5bW6CLz
5Yu/ZG6//ai94f6WzN3cnkS4x71Ihge3uaRWRf1UzqAfaq2vbaABNi5SYWsQCzYv
nxoG4PYQtrc/rzuHERKsx7QWlxFmWXaxJHGvF8cr/+GXUxwjeoRB0n1mMzxhjlFO
m200iJ65mFs+HqS0JpZh4HTdxru5WZe80vv+1AuXO9/AVtZLc1BWrTGWLfTe1ySf
KzxEQqLq8ls0hS9V1MNYlD9ha1B/480zrGZAnwIDAQABAoIBAE2w3pA4tnqhljAI
VgDyPrLD2vnFt7356u6kMoRkeQDNh/aFk2KSj6un7SU2tBNTAfRDWlI+j+0vS5Of
bI8wN2/+uEo/QMZbe+pcuvVjYo8vsxZsbo/dUaPW8rMfFPx1e/TMbRrtLpcYA3Bk
OQCu9yyzW7cXp+V8TbRCWrjzCQR4HMqnUExyDOyJflatQ2641Q4Q2YaAF1NCxJyq
uTyxAPdpvvQ9SAj7eXsF1l0OIfW/4aACrOuvg9aOwPhbrKaT6s0dk8fKhfAm5rAu
Q2tsubzwA5D+mJQqjVwnRHGiN+4GuIcAynevj4IdkznOP81wG/ksP34MkQpFnJ4j
pBZxvQECgYEA6qFWBk9XQpYMVecS4RWvvRyolbKF6HgVEp0ji8euocLIfgJWEFXK
Eb+Ood3NNSff4SpjpGOuzXBbyZiimWAQdzuo4LXwHLfd0cHOW07Lqx7UXsm5+wVp
rzNuZzkQMtRqNqXAfSAdBziSfiMPSIZanqW3zv59oSHLengAAAI4zmECgYEA1T3Q
BFO1J0duKacA6hjQ+DqOkfWuLo9NOFhMK4oFOiMCoFTrgoaU+7HEwPvWSe0d7rku
HhuivGhhha9Viw41Gpfo5Z5oymL5McW52+YPLjugAV5G2dkT68c/C6CPMZYB7PYk
4AtCYsvA5VP6qRmFQ6acm/822kela5RxAeIDbv8CgYEA0dzq8AvpdfJ2KCPePBvE
q/dFR1h989fsqVCKac16gs+RuzvltQi3DDb1ogydLu1yj5j1tSVARhs4zlHLJjrJ
n4xqWkwB7/3511Ntezg4bd/OftYals9Zn072cjeVKJHcSvLpAEJIFJxiU5aSZgFe
bsa1aN0yi3yJ3woUne1e2CECgYEA0qobXHr6B5EI4ztqqtrTb7gh607Ewpit2BFb
RtQ278VwrcbXV/7vJmzsDR9/B0+q95GYXwQ8VFfmqHScVSE3E0uqOVay/eajeyl0
wSraKnmbTF7ALi3IAXG49hqr/HfO9TQDIBffgMz8h1Lc2rwsrLXoGDEdFq4bXVmr
/wkzDS8CgYArNrvZ04EfGTdlgQLcxgGKhQcTibz9/QUkJ/RZPOnCxZFWwgfDIoAQ
99IthRkneZglfhm/R5Znn1t65B8IEXejTZcYN11EugqI1/cOkJ/PySmtUMaeD+/o
Am6x0mszgYThpY+2mM2w2hWTirUbvXS07LbCN0R29fT/a88Kwd2gGQ==
-----END RSA PRIVATE KEY-----
</code></p>

<p>PKCS8处理后的私钥文件示例（Java使用）</p>

<p><code>MIIEpAIBAAKCAQEAw3Djq8ynUbfDfBMVWxMPVtogSUXwtPssniinXuoAmiTMRhkEcWq84xsrFzBl+s13DPvb5Lr172e8bB75lFk2DD7QVNFfm6eBVbuUy0Y9Q5bW6CLz5Yu/ZG6//ai94f6WzN3cnkS4x71Ihge3uaRWRf1UzqAfaq2vbaABNi5SYWsQCzYvnxoG4PYQtrc/rzuHERKsx7QWlxFmWXaxJHGvF8cr/+GXUxwjeoRB0n1mMzxhjlFOm200iJ65mFs+HqS0JpZh4HTdxru5WZe80vv+1AuXO9/AVtZLc1BWrTGWLfTe1ySfKzxEQqLq8ls0hS9V1MNYlD9ha1B/480zrGZAnwIDAQABAoIBAE2w3pA4tnqhljAIVgDyPrLD2vnFt7356u6kMoRkeQDNh/aFk2KSj6un7SU2tBNTAfRDWlI+j+0vS5OfbI8wN2/+uEo/QMZbe+pcuvVjYo8vsxZsbo/dUaPW8rMfFPx1e/TMbRrtLpcYA3BkOQCu9yyzW7cXp+V8TbRCWrjzCQR4HMqnUExyDOyJflatQ2641Q4Q2YaAF1NCxJyquTyxAPdpvvQ9SAj7eXsF1l0OIfW/4aACrOuvg9aOwPhbrKaT6s0dk8fKhfAm5rAuQ2tsubzwA5D+mJQqjVwnRHGiN+4GuIcAynevj4IdkznOP81wG/ksP34MkQpFnJ4jpBZxvQECgYEA6qFWBk9XQpYMVecS4RWvvRyolbKF6HgVEp0ji8euocLIfgJWEFXKEb+Ood3NNSff4SpjpGOuzXBbyZiimWAQdzuo4LXwHLfd0cHOW07Lqx7UXsm5+wVprzNuZzkQMtRqNqXAfSAdBziSfiMPSIZanqW3zv59oSHLengAAAI4zmECgYEA1T3QBFO1J0duKacA6hjQ+DqOkfWuLo9NOFhMK4oFOiMCoFTrgoaU+7HEwPvWSe0d7rkuHhuivGhhha9Viw41Gpfo5Z5oymL5McW52+YPLjugAV5G2dkT68c/C6CPMZYB7PYk4AtCYsvA5VP6qRmFQ6acm/822kela5RxAeIDbv8CgYEA0dzq8AvpdfJ2KCPePBvEq/dFR1h989fsqVCKac16gs+RuzvltQi3DDb1ogydLu1yj5j1tSVARhs4zlHLJjrJn4xqWkwB7/3511Ntezg4bd/OftYals9Zn072cjeVKJHcSvLpAEJIFJxiU5aSZgFebsa1aN0yi3yJ3woUne1e2CECgYEA0qobXHr6B5EI4ztqqtrTb7gh607Ewpit2BFbRtQ278VwrcbXV/7vJmzsDR9/B0+q95GYXwQ8VFfmqHScVSE3E0uqOVay/eajeyl0wSraKnmbTF7ALi3IAXG49hqr/HfO9TQDIBffgMz8h1Lc2rwsrLXoGDEdFq4bXVmr/wkzDS8CgYArNrvZ04EfGTdlgQLcxgGKhQcTibz9/QUkJ/RZPOnCxZFWwgfDIoAQ99IthRkneZglfhm/R5Znn1t65B8IEXejTZcYN11EugqI1/cOkJ/PySmtUMaeD+/oAm6x0mszgYThpY+2mM2w2hWTirUbvXS07LbCN0R29fT/a88Kwd2gGQ==</code></p>

<p>公钥文件示例</p>

<p><code>
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAw3Djq8ynUbfDfBMVWxMP
VtogSUXwtPssniinXuoAmiTMRhkEcWq84xsrFzBl+s13DPvb5Lr172e8bB75lFk2
DD7QVNFfm6eBVbuUy0Y9Q5bW6CLz5Yu/ZG6//ai94f6WzN3cnkS4x71Ihge3uaRW
Rf1UzqAfaq2vbaABNi5SYWsQCzYvnxoG4PYQtrc/rzuHERKsx7QWlxFmWXaxJHGv
F8cr/+GXUxwjeoRB0n1mMzxhjlFOm200iJ65mFs+HqS0JpZh4HTdxru5WZe80vv+
1AuXO9/AVtZLc1BWrTGWLfTe1ySfKzxEQqLq8ls0hS9V1MNYlD9ha1B/480zrGZA
nwIDAQAB
-----END PUBLIC KEY-----
</code></p>
<h3 id='2'>2. 上传商户公钥</h3><pre class="highlight plaintext"><code>PUT /cms/merchants/#{merchant_id}/public_key
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT /cms/merchants/5399355381712172/public_key <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d<span class="s1">' {
    "public_key":"MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAg/AchA3vsfR4a/hXK2d7Y97B/2XCK/p2wbvQRwMfqqrrB5o/NiIeqmOn8o5Bc/LwRgpY2foxD7kDL26q73Wwo19qBbsK5agkRZMWoZsea5mSHiFL9ClrE3+xytErZAsivDwPbkaxFCYTIDpPmXNpJQnTXkymOy6Pz/RAMiLgkrTjD1r6MCLZ9pqg0Pt8yKj2SfPqMyfeA7ld2yOa3VNcJXypgvvEARxmxrEI0EOTun9VUKWrA7FvvDICvc/ZAMrXg/UOVfch6oQrAlPc+3A1SDIlfKaFLl2zbb11CZy5J3mwz4N6SVQNS+QApGUdf+DZnMxlgn6eMN2iYziVw9YR9QIDAQAB"
}
</span></code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>将生成的商户公钥文件去除头尾、换行和空格，转成一行字符串。使用上传公钥接口上传，上传公钥需要Login认证且有修改该商户公钥权限。</p>

<p>转换后的公钥字符串示例</p>

<p><code>MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAw3Djq8ynUbfDfBMVWxMPVtogSUXwtPssniinXuoAmiTMRhkEcWq84xsrFzBl+s13DPvb5Lr172e8bB75lFk2DD7QVNFfm6eBVbuUy0Y9Q5bW6CLz5Yu/ZG6//ai94f6WzN3cnkS4x71Ihge3uaRWRf1UzqAfaq2vbaABNi5SYWsQCzYvnxoG4PYQtrc/rzuHERKsx7QWlxFmWXaxJHGvF8cr/+GXUxwjeoRB0n1mMzxhjlFOm200iJ65mFs+HqS0JpZh4HTdxru5WZe80vv+1AuXO9/AVtZLc1BWrTGWLfTe1ySfKzxEQqLq8ls0hS9V1MNYlD9ha1B/480zrGZAnwIDAQAB</code></p>
<h3 id='3'>3. 获取普尔公钥</h3>
<p>下载普尔公钥：</p>
<pre class="highlight plaintext"><code>GET /cms/pooul_public_key
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET /cms/pooul_public_key <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-----BEGIN PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC+Vd3j0McNfR3VvT7mZp/7M6UL</span><span class="se">\n</span><span class="s2">FJSc3dh3/56JP8DZk+cDlXC2LR0z0OELJeyTitFeBjpPWzWH3OOFI/OL3nD5/oNZ</span><span class="se">\n</span><span class="s2">fK+wHd4Tzxj2SdWlyuqRhNv3xG2obUUYZ9urUvkCvxL1SclaXW7cq22V/TTNSgJq</span><span class="se">\n</span><span class="s2">7CGdc+q/XLNqcmLt7QIDAQAB</span><span class="se">\n</span><span class="s2">-----END PUBLIC KEY-----</span><span class="se">\n</span><span class="s2">"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='4-jwt'>4. 使用JWT生成请求数据</h3>
<blockquote>
<p>HEADER: ALGORITHM &amp; TOKEN TYPE</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"alg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"RS256"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"typ"</span><span class="p">:</span><span class="w"> </span><span class="s2">"JWT"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>PAYLOAD: DATA</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.scan.109"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2113</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test Scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_info"</span><span class="p">:</span><span class="s2">"alex device"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"op_user_id"</span><span class="p">:</span><span class="s2">"301"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"openid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oRXdVs59x_E6nVTBHXHkuSjsNVKw"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attach"</span><span class="p">:</span><span class="s2">"Alex attach"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>VERIFY SIGNATURE</p>
</blockquote>
<pre class="highlight plaintext"><code>RSASHA256(base64UrlEncode(header) + "." + base64UrlEncode(payload),'rsa_private.pem')
</code></pre>
<blockquote>
<p>生成请求数据</p>
</blockquote>
<pre class="highlight plaintext"><code>eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlfdHlwZSI6IndlY2hhdC5zY2FuIiwibWNoX3RyYWRlX2lkIjoiYWxleHRlc3Quc2Nhbi4xNTMiLCJ0b3RhbF9mZWUiOjIyNywic3BiaWxsX2NyZWF0ZV9pcCI6IjEyNy4wLjAuMSIsIm5vdGlmeV91cmwiOiJodHRwOi8vMTEyLjc0LjE4NC4yMzY6MzAwNi9mYWtlLXJlY3YiLCJib2R5IjoiQWxleCBUZXN0IFdlY2hhdCBTY2FuIiwiZGV2aWNlX2luZm8iOiJhbGV4IHdlY2hhdCBkZXZpY2UiLCJvcF91c2VyX2lkIjoiMTEiLCJvcGVuaWQiOiJvUlhkVnM1OXhfRTZuVlRCSFhIa3VTanNOVkt3IiwiYXR0YWNoIjoiQWxleCBhdHRhY2ggVGVzdCJ9.IGSTNK7rzkaXnvKRjxrGMiRS_Z0x5bYN0Sw-QS8UxizkoCaytkVLMT0KLkfWKsyyCHt5hy7BrVdLu9nESSKxwJwwBAZUSThn_tbrkSYXOt08yNKBG2jYn6f_ty2jk3Yr9DhRUsYnKSrZS7sbK5lS1SG_I0tAGd4HLa94KzwilG0LhUZpJbXKyMpIzYPBod7O91f6pqvT1A48F_uDIttUp_Vm7SlchMLPT2i2tzP7O7ghcThcGakaPXNKkOV9zYWOXYFE84eoekwO6t5jtl0R2BpSH_xNAzEhCfQQ5FY7LFDBDypCJEuYaBTyy2JK7j8wNQiTiL01NKntyya9qABgCA
</code></pre>
<ol>
<li><p>按照接口文档参数要求，将请求数据写成 json 格式</p></li>
<li><p>使用程序语言的JWT包（JWT支持各种语言，在 https://jwt.io 上均有下载和DEMO），将 json 数据编码，签名算法使用RSA算法RS256</p>

<ul>
<li><a href="https://github.com/jwt/ruby-jwt">Ruby demo</a></li>
<li><a href="https://github.com/auth0/java-jwt">Java demo</a></li>
<li><a href="https://github.com/firebase/php-jwt">Php demo</a></li>
<li><a href="https://github.com/dvsekhvalnov/jose-jwt">C# demo</a></li>
<li><a href="https://jwt.io/">更多 Demo</a></li>
</ul></li>
</ol>
<h3 id='5-token-http-post-content-type-text-plain-url'>5.将编码后的token通过HTTP POST方式（Content-Type: text/plain）发送到相应接口url。</h3><pre class="highlight shell tab-shell"><code>curl -X POST /v2/pay?merchant_id<span class="o">=</span>7609332123096874 <span class="se">\</span>
-H <span class="s2">"Content-Type: text/plain"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d<span class="s1">' eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9.eyJwYXlfdHlwZSI6IndlY2hhdC5zY2FuIiwibWNoX3RyYWRlX2lkIjoiYWxleHRlc3Quc2Nhbi4xODEiLCJ0b3RhbF9mZWUiOjUsInNwYmlsbF9jcmVhdGVfaXAiOiIxMjcuMC4wLjEiLCJub3RpZnlfdXJsIjoiaHR0cDovLzExMi43NC4xODQuMjM2OjMwMDYvZmFrZS1yZWN2IiwiYm9keSI6IkFsZXggVGVzdCBXZWNoYXQgU2NhbiIsImRldmljZV9pbmZvIjoiYWxleCB3ZWNoYXQgZGV2aWNlIiwib3BfdXNlcl9pZCI6IjExIiwib3BlbmlkIjoib1JYZFZzNTl4X0U2blZUQkhYSGt1U2pzTlZLdyIsImF0dGFjaCI6IkFsZXggYXR0YWNoIFRlc3QifQ.a77r3uZH9P_gyJESbm1pTJ4rjsU5Pmn4zO90dRJrG6ozzRW7v95l61ezg8r_HTY7IELrHXs8hlquJPVK-6mdzlFjPWyo9_H40gOdDFlYE-QzSwUOewQNaqVuR7Z3KDhPMxr1scy50nXqoaEtq_IODdrJPxq2wxw9YDLas_lVFrhxSWwqQXZvDwZRkG9QAnmOsWvHKP-VFo-r4ne0sapSx6SHpJE-bqUwAOkxhLUmUpFiUxK3hJaGVmfhzymX5yBNNwEEBscuZig2i7PDoN4jXh0W9wgay9wq1-M31qNHnWcUhxXckmvtlR9kmdX5SVCOL0RK1u9ko664wr8Soi2PvA‘
</span></code></pre><h3 id='6-jwt'>6. 使用普尔公钥验签 JWT</h3>
<blockquote>
<p>成功响应示例</p>
</blockquote>
<pre class="highlight plaintext"><code>eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJjb2RlIjowLCJtc2ciOiJzdWNjZXNzIiwiZGF0YSI6eyJjb2RlX3VybCI6IndlaXhpbjovL3d4cGF5L2JpenBheXVybD9wcj10TmtlenkwIiwicHJlcGF5X2lkIjoid3gxMDExMDIyNDYxMjYxNWFhN2I0MzE3YzAyMTc1NDk5OTczIiwidHJhZGVfaWQiOiI1YjQ0MjFjMDAxYzkxMTdkNDlkMzU3NzEiLCJtY2hfdHJhZGVfaWQiOiJhbGV4dGVzdC5zY2FuLjE1MyIsIm1lcmNoYW50X2lkIjoiNTM5OTM1NTM4MTcxMjE3MiJ9LCJkZWJ1ZyI6eyJjdXJyX3VzZXIiOiJHdWVzdChub3QgbG9nZ2VkLWluKSIsImN1cnJfZW52IjoiZGV2ZWxvcG1lbnQiLCJkYXRhYmFzZV9uYW1lIjoic3pwbDJfZGV2IiwiYXN5bmMiOnRydWV9LCJ0aW1lX2VsYXBzZWQiOjAuMzgwMSwibm9uY2Vfc3RyIjoiNWI0NDIxYzAwMWM5MTE3ZDQ5ZDM1NzczIn0.HqUG0qgOnVZcygfTxEJjkLuqiY_vWK_68wqLJTA-ZQkXuXrAoddTkSqUtztW-KGcZf9vaDCqNYDZDlkcAnkOQzc3xl4D2z8AGECcTfaybgO7SSSqltP7vsIOJCFXOr5-1Jv1lEVgB7V0Y-t9A6o-YSUd0p5DFeybqpoKX683LG4
</code></pre>
<blockquote>
<p>失败响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="err">#错误代码</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"> </span><span class="err">#错误信息</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>提交请求后如果响应成功，系统会返回jwt字符串，商户需要使用 jwt工具 并用普尔公钥进行验签，确保接收到的是普尔系统返回的正确数据。</p>
<h1 id='pay'>收款 Pay</h1><h2 id='pay-order'>统一支付 Pay order</h2>
<blockquote>
<p>Post /v2/pay?merchant_id=#{merchant_id}</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.scan.113"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test Scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_info"</span><span class="p">:</span><span class="s2">"alex device"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"op_user_id"</span><span class="p">:</span><span class="s2">"301"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attach"</span><span class="p">:</span><span class="s2">"Alex attach"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>请求方式：Post /v2/pay?</p>

<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>发起支付的商户编号，16位数字，由普尔瀚达分配</td>
</tr>
</tbody></table>

<p>Body公共请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>pay_type <br> <strong>必填</strong> <br> <code>string</code></td>
<td>支付类型，不同的支付类型，pay_type值不一样，需对应<a href="#pay-type">查看支付类型编码</a></td>
</tr>
<tr>
<td>nonce_str  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>随机字符串，在同一个merchant_id 下每次请求必须为唯一，如：wZovMzOCaTJaicnL</td>
</tr>
<tr>
<td>mch_trade_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户订单号，在同一个merchant_id 下每次请求必须为唯一，如：alextest.scan.113</td>
</tr>
<tr>
<td>total_fee  <br> <strong>必填</strong> <br> <code>int</code></td>
<td>支付总金额，单位为分，只能为整数，如：888 代表8.88元</td>
</tr>
<tr>
<td>body  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商品或支付单简要描述</td>
</tr>
<tr>
<td>spbill_create_ip <br> <strong>选填</strong> <br> <code>string</code></td>
<td>发起支付的终端IP，APP、jsapi、jsminipg、wap支付提交用户端ip，scan、micro支付填调用支付API的服务端IP。<br>微信支付必填、支付宝选填</td>
</tr>
<tr>
<td>notify_url  <br> <strong>选填</strong> <br> <code>string</code></td>
<td>支付结果通知地址，接收支付结果异步通知回调地址，通知url必须为直接可访问的url，不能携带参数。如：http://pay.pooul.com/notify</td>
</tr>
<tr>
<td>time_start  <br> <strong>选填</strong> <br> <code>int</code></td>
<td>订单开始时间，为10位 UNIX 时间戳，如：1530759545</td>
</tr>
<tr>
<td>time_expire  <br> <strong>选填</strong> <br> <code>int</code></td>
<td>订单失效时间，为10位 UNIX 时间戳，如：1530759574</td>
</tr>
<tr>
<td>store_id  <br> <strong>选填</strong> <br> <code>string</code></td>
<td>商户门店编号，支付宝支付不传门店号会导致优惠不生效，可能引起优惠活动无法参加</td>
</tr>
<tr>
<td>device_info  <br> <strong>选填</strong> <br> <code>string</code></td>
<td>终端设备号(门店号或收银设备ID)，注意：PC网页或APP支付请传&quot;WEB&quot;</td>
</tr>
<tr>
<td>op_user_id  <br> <strong>选填</strong> <br> <code>string</code></td>
<td>操作员或收银员编号</td>
</tr>
</tbody></table>
<h3 id='common-micro'>统一反扫支付 common.micro</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"common.micro"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.micro.78"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1223</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test Micro"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"auth_code"</span><span class="p">:</span><span class="s2">"136345610916464024"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应：付款成功</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b378a0601c9117d162f281c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.micro.78"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"支付成功"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应：需要用户输入密码</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"USERPAYING, 需要用户输入支付密码"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b378a0601c9117d162f281c"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.micro.78"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"支付中, USERPAYING, 需要用户输入支付密码"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>包含微信刷卡支付、支付宝条码支付，此模式下商家扫码消费者付款码</p>

<p>收银员使用扫码设备读取微信/支付宝用户刷卡授权码以后，二维码或条码信息传送至商户收银台，由商户收银台或者商户后台调用该接口发起支付。</p>

<p>提醒1：提交支付请求后系统会同步返回支付结果。当返回结果为“系统错误”时，商户系统等待5秒后调用【查询订单API】，查询支付实际交易结果；当返回trade_state为“6”时，商户系统可设置间隔时间(建议10秒)重新查询支付结果，直到支付成功或超时(建议30秒)；</p>

<p>提醒2：在调用查询接口返回后，如果交易状况不明晰，请调用【撤销订单API】，此时如果交易失败则关闭订单，该单不能再支付成功；如果交易成功，则将扣款退回到用户账户。当撤销无返回或错误时，请再次调用。注意：请勿扣款后立即调用【撤销订单API】,建议至少15秒后再调用。</p>

<p>Body需增加请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>auth_code <br> <strong>必填</strong> <br> <code>string</code></td>
<td>微信支付或支付宝支付授权码，设备读取用户微信中的条码或者二维码信息转换成字符</td>
</tr>
</tbody></table>

<p>开发说明：</p>

<ol>
<li>商户通过扫码设备获取消费者付款码（微信支付付款码、支付宝付款码）</li>
<li>调用统一支付接口发起支付</li>
<li>系统同步返回支付状态</li>
<li>如支付状态为6（代表支付中），商户系统需调用<a href="#query">查询订单API</a>确认支付状态</li>
</ol>
<h3 id='wechat-scan'>微信扫码支付 wechat.scan</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.scan.113"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test Scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"device_info"</span><span class="p">:</span><span class="s2">"alex device"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"op_user_id"</span><span class="p">:</span><span class="s2">"301"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attach"</span><span class="p">:</span><span class="s2">"Alex attach"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"weixin://wxpay/bizpayurl?pr=oB8TuWO"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"prepay_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wx302121541410392cf43ee7773887304578"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b3783f101c9117d132f2813"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.scan.113"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>扫码支付是指商户系统按微信支付协议生成支付二维码，用户再用微信“扫一扫”来完成支付。适用于PC网站支付、实体店单品等场景。</p>

<p>开发说明：</p>

<ol>
<li>调用统一支付接口，获取 code_url 信息</li>
<li>商户后台系统根据返回的code_url生成二维码，并展示给顾客</li>
<li>用户打开微信“扫一扫”扫描二维码，输入支付密码确认支付</li>
<li>平台通过发送异步消息通知商户后台系统支付结果，如未收到通知，调用<a href="#query">查询订单API</a></li>
</ol>
<h3 id='wechat-jsapi'>微信公众号支付 wechat.jsapi</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.jsapi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.jsapi.34"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9872</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test Jsapi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sub_appid"</span><span class="p">:</span><span class="s2">"wx069eb0cbbdd45873"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sub_openid"</span><span class="p">:</span><span class="s2">"outOWs-bgUH2QiCE0vNZhyCj2FJI"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"prepay_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wx012307229175165bd79bbb6b3297639794"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b38ee2a01c9113d0cc907a6"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.jsapi.34"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pay_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">appId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">wx26a0ffd6bfa99df7</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">timeStamp</span><span class="se">\"</span><span class="s2">:1530457643,</span><span class="se">\"</span><span class="s2">nonceStr</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">5b38ee2b01c9113d0cc907a8</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">package</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">prepay_id=wx012307229175165bd79bbb6b3297639794</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">signType</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">MD5</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">paySign</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">5c8d2742f597d01f38886d78769d3132</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>公众号支付是指用户在微信中打开商户的H5页面，商户在H5页面通过调用微信支付提供的JSAPI接口调起微信支付模块来完成支付。适用于在公众号、朋友圈、聊天窗口等微信内完成支付的场景。</p>

<p>Body需增加请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>sub_appid <br> <strong>必填</strong> <br> <code>string</code></td>
<td>与发起支付商户主体一致的公众号appid，公众号必须为认证的服务号</td>
</tr>
<tr>
<td>sub_openid <br> <strong>必填</strong> <br> <code>string</code></td>
<td>用户在商户appid下的唯一标识，下单前需要调用<a href="https://mp.weixin.qq.com/wiki?t=resource/res_main&amp;id=mp1421140842">网页授权获取用户openid接口文档</a>接口获取到用户的Openid</td>
</tr>
</tbody></table>

<p>开发说明：</p>

<ol>
<li>用户在微信环境中点击使用微信支付</li>
<li>商户系统后台调用统一支付接口，获取pay_info信息</li>
<li>商户系统前端调用：微信内H5调起支付，输入上一步获得的pay_info中的参数，<a href="https://pay.weixin.qq.com/wiki/doc/api/jsapi_sl.php?chapter=7_7&amp;index=6">参考文档</a></li>
<li>用户输入支付密码确认支付</li>
<li>系统通过发送异步消息通知商户后台系统支付结果，如未收到通知，调用<a href="#query">查询订单API</a></li>
</ol>
<h3 id='wechat-jsminipg'>微信小程序支付 wechat.jsminipg</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.jsminipg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.jsminipg.19"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test jsminipg"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sub_appid"</span><span class="p">:</span><span class="s2">"wx758379be100f9991"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sub_openid"</span><span class="p">:</span><span class="s2">"o2uCJ5RGOOylP75Ipvncazz0bFAI"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"prepay_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wx01231242671738eafc7c4ce10632795388"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b38ef6a01c9113d0cc907aa"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.jsminipg.19"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pay_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">appId</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">wx758379be100f9991</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">timeStamp</span><span class="se">\"</span><span class="s2">:1530457962,</span><span class="se">\"</span><span class="s2">nonceStr</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">5b38ef6a01c9113d0cc907ac</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">package</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">prepay_id=wx01231242671738eafc7c4ce10632795388</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">signType</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">MD5</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">paySign</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">052f1f7098d4c70a9e5244990a9d7391</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>用户在微信小程序中使用微信支付的场景</p>

<p>Body需增加请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>sub_appid <br> <strong>必填</strong> <br> <code>string</code></td>
<td>与发起支付商户主体一致的小程序APPID</td>
</tr>
<tr>
<td>sub_openid <br> <strong>必填</strong> <br> <code>string</code></td>
<td>用户在商户appid下的唯一标识，下单前需要调用<a href="https://developers.weixin.qq.com/miniprogram/dev/api/api-login.html">网页授权获取用户openid接口文档</a>接口获取到用户的Openid</td>
</tr>
</tbody></table>

<p>开发说明：</p>

<ol>
<li>用户在商户小程序中点击使用微信支付</li>
<li>商户系统后台调用统一支付接口，获取pay_info信息</li>
<li>商户系统前端调用：小程序调起支付API，输入上一步获得的pay_info中的参数，<a href="https://pay.weixin.qq.com/wiki/doc/api/wxa/wxa_sl_api.php?chapter=7_7&amp;index=5">参考文档</a></li>
<li>用户输入支付密码确认支付</li>
<li>系统通过发送异步消息通知商户后台系统支付结果，如未收到通知，调用<a href="#query">查询订单API</a></li>
</ol>
<h3 id='app-wechat-app'>微信APP支付 wechat.app</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.app"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.app.18"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test app"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sub_appid"</span><span class="p">:</span><span class="s2">"wx2fbcb61b6e5b1384"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"prepay_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wx01231852292289b6404b67123767183767"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b38f0dc01c9113d0cc907ae"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.app.18"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pay_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{</span><span class="se">\"</span><span class="s2">appid</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">wx2fbcb61b6e5b1384</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">partnerid</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">1507497331</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">prepayid</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">wx01231852292289b6404b67123767183767</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">package</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">Sign=WXPay</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">noncestr</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">5b38f0dc01c9113d0cc907b0</span><span class="se">\"</span><span class="s2">,</span><span class="se">\"</span><span class="s2">timestamp</span><span class="se">\"</span><span class="s2">:1530458332,</span><span class="se">\"</span><span class="s2">sign</span><span class="se">\"</span><span class="s2">:</span><span class="se">\"</span><span class="s2">a4aea5fff088a73d18e4afc8da663615</span><span class="se">\"</span><span class="s2">}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>APP支付是指商户通过在移动端应用APP中集成开放SDK调起微信支付模块来完成支付。适用于在移动端APP中集成微信支付功能的场景。</p>

<p>Body需增加请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>sub_appid <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户在微信开放平台上申请的APPID，开发平台认证主体需与商户主体一致</td>
</tr>
</tbody></table>

<p>开发说明：</p>

<ol>
<li>用户在商户APP中点击使用微信支付</li>
<li>商户系统后台调用统一支付接口，获取pay_info信息</li>
<li>商户系统前端调用：APP调起支付，输入上一步获得的pay_info中的参数，<a href="https://pay.weixin.qq.com/wiki/doc/api/app/app_sl.php?chapter=9_12&amp;index=2">参考文档</a></li>
<li>用户输入支付密码确认支付</li>
<li>系统通过发送异步消息通知商户后台系统支付结果，如未收到通知，调用<a href="#query">查询订单API</a></li>
</ol>
<h3 id='h5-wechat-wap'>微信H5支付 wechat.wap</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"wechat.wap"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.app.22"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"Alex Test app"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_app_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WAP"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_app_name"</span><span class="p">:</span><span class="s2">"普尔商城"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_app_id"</span><span class="p">:</span><span class="s2">"https://store.pooul.com/"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>微信H5支付是指商户在微信客户端外的移动端网页展示商品或服务，用户在前述页面确认使用微信支付时，商户发起本服务呼起微信客户端进行支付。 主要用于触屏版的手机浏览器请求微信支付的场景。可以方便的从外部浏览器唤起微信支付。</p>

<p>Body需增加请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_app_type <br> <strong>必填</strong> <br> <code>string</code></td>
<td>发起支付的应用类型，<br>IOS：IOS APP，<br>AND：Android APP, <br>WAP：手机网站</td>
</tr>
<tr>
<td>mch_app_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>APP为：应用名称，手机网站为：网站名称</td>
</tr>
<tr>
<td>mch_app_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>IOS APP为：bundle_id，如：com.tencent.wzryIOS，<br>Android APP为package_name，如：com.tencent.tmgp.sgame，<br>WAP为网站首页地址，如：https://store.pooul.com/</td>
</tr>
</tbody></table>

<p>开发说明：</p>

<ol>
<li>用户在商户手机网站中点击使用微信支付</li>
<li>商户系统后台调用统一支付接口，获取支付跳转链接 mweb_url</li>
<li>商户前端跳转至 mweb_url</li>
<li>用户输入支付密码确认支付</li>
<li>系统通过发送异步消息通知商户后台系统支付结果，如未收到通知，调用<a href="#query">查询订单API</a></li>
</ol>
<h3 id='alipay-scan'>支付宝扫码支付 alipay.scan</h3><pre class="highlight plaintext"><code>Post /v2/pay?merchant_id=5399355381712172
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="s2">"alipay.scan"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.alipay.scan.211"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7622</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"body"</span><span class="p">:</span><span class="s2">"This's Subjects Alex test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"store_id"</span><span class="p">:</span><span class="s2">"9527"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10000,Success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"code_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://qr.alipay.com/bax05219xy73fxcgfi7w206f"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b66a66801c9113e972bb7f3"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.alipay.scan.210"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1333259781809471"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alipay.scan"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"支付中, 10000,Success"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>收银员通过收银台或商户后台调用支付宝接口，生成二维码后，展示给用户，由用户使用支付宝扫描二维码完成订单支付。</p>

<p>开发说明：</p>

<ol>
<li>调用统一支付接口，获取 code_url 信息</li>
<li>商户后台系统根据返回的 code_url 生成二维码，并展示给顾客</li>
<li>用户打开支付宝“扫一扫”扫描二维码，输入支付密码确认支付</li>
<li>平台通过发送异步消息通知商户后台系统支付结果，如未收到通知，调用<a href="#query">查询订单API</a></li>
</ol>
<h2 id='query'>查询订单 Query</h2>
<blockquote>
<p>Post /v2/pay/query?merchant_id=5399355381712172</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight plaintext"><code>{
    "code":0,
    "msg":"success",
    "data":{
        ……  
    }
}

</code></pre>
<p>该接口提供所有支付订单的查询，商户可以通过查询订单接口主动查询订单状态，完成下一步的业务逻辑。</p>

<p>需要调用查询接口的情况：</p>

<ul>
<li>当商户后台、网络、服务器等出现异常，商户系统最终未接收到支付通知；</li>
<li>调用支付接口后，返回系统错误或未知交易状态情况；</li>
<li>调用反扫支付API，返回支付中的状态；</li>
<li>调用关单或撤销接口API之前，需确认支付状态；</li>
</ul>

<p>以trade_state确认支付状态，<a href="#trade_state">状态码</a></p>

<p>请求方式：Post /v2/pay/query?</p>

<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>发起支付的商户编号，16位数字，由普尔瀚达分配</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_trade_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户订单号</td>
</tr>
<tr>
<td>nonce_str  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>随机字符串，在同一个merchant_id 下每次请求必须为唯一，如：wZovMzOCaTJaicnL</td>
</tr>
</tbody></table>
<h2 id='close'>关闭订单 Close</h2>
<blockquote>
<p>Post /v2/pay/close?merchant_id=5399355381712172</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="err">#商户订单号</span><span class="w">
    </span><span class="s2">"nonce_str"</span><span class="p">:</span><span class="w"> </span><span class="err">#随机字符串</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="err">为成功，非</span><span class="mi">0</span><span class="err">为失败</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>以下情况需要调用关单接口：</p>

<ul>
<li>商户订单支付失败需要生成新单号重新发起支付，要对原订单号调用关单，避免重复支付；</li>
<li>系统下单后，用户支付超时，系统退出不再受理，避免用户继续，请调用关单接口。</li>
</ul>

<p>注意：订单生成后不能马上调用关单接口，最短调用时间建议间隔为5分钟。</p>

<p>请求方式：Post /v2/pay/close?</p>

<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>发起支付的商户编号，16位数字，由普尔瀚达分配</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_trade_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户订单号</td>
</tr>
<tr>
<td>nonce_str  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>随机字符串，在同一个merchant_id 下每次请求必须为唯一，如：wZovMzOCaTJaicnL</td>
</tr>
</tbody></table>
<h2 id='reverse'>撤销订单 Reverse</h2>
<blockquote>
<p>Post /v2/pay/reverse?merchant_id=5399355381712172</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="err">#商户订单号</span><span class="w">
    </span><span class="s2">"nonce_str"</span><span class="p">:</span><span class="w"> </span><span class="err">#随机字符串</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="err">为成功，非</span><span class="mi">0</span><span class="err">为失败</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>支付交易返回失败或支付系统超时，调用该接口撤销交易。如果此订单用户支付失败，支付渠道会将此订单关闭；如果用户支付成功，支付渠道会将此订单资金退还给用户。</p>

<p>注意：7天以内的交易单可调用撤销，其他正常支付的单如需实现相同功能请调用申请退款API。提交支付交易后调用【查询订单API】，没有明确的支付结果再调用【撤销订单API】。</p>

<p>调用支付接口后请勿立即调用撤销订单API，建议支付后至少15s后再调用撤销订单接口。</p>

<p>可用支付渠道：微信支付、支付宝</p>

<p>请求方式：Post /v2/pay/reverse?</p>

<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>发起支付的商户编号，16位数字，由普尔瀚达分配</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_trade_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户订单号</td>
</tr>
<tr>
<td>nonce_str  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>随机字符串，在同一个merchant_id 下每次请求必须为唯一，如：wZovMzOCaTJaicnL</td>
</tr>
</tbody></table>
<h2 id='refund'>申请退款 Refund</h2>
<blockquote>
<p>Post /v2/pay/refund?merchant_id=5399355381712172</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.scan.112"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="mi">8872</span><span class="p">,</span><span class="w">
    </span><span class="s2">"refund_desc"</span><span class="p">:</span><span class="s2">"Alex Test"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="err">为成功，非</span><span class="mi">0</span><span class="err">为失败</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>接口说明
- 当交易发生之后一段时间内，由于买家或者卖家的原因需要退款时，卖家可以通过退款接口将支付款退还给买家，支付渠道将在收到退款请求并且验证成功之后，按照退款规则将支付款按原路退到买家帐号上。
- 交易超过约定时间的订单无法进行退款
- 退款支持单笔交易分多次退款，多次退款需要提交原支付订单的商户订单号和设置不同的退款单号。
- 一笔退款失败后重新提交，要采用原来的退款单号。
- 总退款金额不能超过用户实际支付金额
- 退款有一定延时，用零钱支付的退款20分钟内到账，银行卡支付的退款3个工作日后重新查询退款状态。</p>

<p>注意 </p>

<ol>
<li>微信支付交易时间超过一年的订单无法提交退款，支付宝为签约时设置的可退款时间 </li>
<li>微信支付每个支付订单的部分退款次数不能超过50次</li>
</ol>

<p>请求方式：Post /v2/pay/refund?</p>

<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>发起支付的商户编号，16位数字，由普尔瀚达分配</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_trade_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户订单号</td>
</tr>
<tr>
<td>refund_fee <br> <strong>必填</strong> <br> <code>int</code></td>
<td>退款金额，单位为分</td>
</tr>
<tr>
<td>refund_desc <br> <strong>必填</strong> <br> <code>string</code></td>
<td>退款原因</td>
</tr>
<tr>
<td>notify_url <br> <strong>选填</strong> <br> <code>string</code></td>
<td>异步接收退款结果通知的回调地址，通知URL必须为外网可访问的url，不允许带参数</td>
</tr>
<tr>
<td>nonce_str  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>随机字符串，在同一个merchant_id 下每次请求必须为唯一，如：wZovMzOCaTJaicnL</td>
</tr>
</tbody></table>
<h2 id='refund-query'>退款查询 Refund query</h2>
<blockquote>
<p>Post /v2/pay/refund_query?merchant_id=5399355381712172</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="s2">"alextest.scan.112"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>响应</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"cash_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9872</span><span class="p">,</span><span class="w">
        </span><span class="s2">"out_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4200000114201806284156184664"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9872</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b34b9a901c9112ae61fb8bc"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.jsapi.33"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wechat.jsapi"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"转入退款, "</span><span class="p">,</span><span class="w">
        </span><span class="s2">"refunds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"refund_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b34ba3d01c9112ae61fb8c1"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"refund_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b34ba4501c9112ae61fb8c3"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"refund_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b34ba4f01c9112ae61fb8c5"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1283</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"refund_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b34ba5b01c9112ae61fb8c7"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4332</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>提交退款申请后，通过调用该接口查询退款状态。退款有一定延时，用零钱支付的退款20分钟内到账，银行卡支付的退款3个工作日后重新查询退款状态。</p>

<p>注意：如果单个支付订单部分退款次数多次时使用商户订单号查询会返回多条退款记录</p>

<p>请求方式：Post /v2/pay/refund_query?</p>

<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>发起支付的商户编号，16位数字，由普尔瀚达分配</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>mch_trade_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户订单号</td>
</tr>
<tr>
<td>nonce_str  <br> <strong>必填</strong> <br> <code>string</code></td>
<td>随机字符串，在同一个merchant_id 下每次请求必须为唯一，如：wZovMzOCaTJaicnL</td>
</tr>
</tbody></table>
<h2 id='pay-notify'>支付结果通知 Pay notify</h2>
<p>支付完成后，系统会把相关支付结果和用户信息发送给商户，商户需要接收处理，并需要响应字符串&quot;success&quot;（大小写皆可）。</p>

<p>对后台通知交互时，如果微信收到商户的应答不是成功或超时，系统认为通知失败，系统会通过一定的策略定期重新发起通知，尽可能提高通知的成功率，但系统不保证通知最终能成功。 （通知频率为15/15/30/180/1800/1800/1800/1800/3600，单位：秒）</p>

<p>注意：同样的通知可能会多次发送给商户系统。商户系统必须能够正确处理重复的通知。
推荐的做法是，当收到通知进行处理时，首先检查对应业务数据的状态，判断该通知是否已经处理过，如果没有处理过再进行处理，如果处理过直接返回结果成功。在对业务数据进行状态检查和处理之前，要采用数据锁进行并发控制，以避免函数重入造成的数据混乱。</p>

<p>特别提醒：商户系统对于支付结果通知的内容一定要做签名验证,并校验返回的订单金额是否与商户侧的订单金额一致，防止数据泄漏导致出现“假通知”，造成资金损失。</p>
<h2 id='refund-notify'>退款结果通知 Refund notify</h2>
<p>退款成功后系统会将退款成功状态发给商户，商户需要接收处理，方式与支付结果通知一样</p>
<h1 id='accounting'>账务 Accounting</h1>
<ul>
<li>认证方式：基于Login权限，<a href="#login">查看Login认证说明</a></li>
<li>所需权限：账务查询</li>
</ul>
<h2 id='pay-orders'>查询交易记录 Pay orders</h2><h3 id='pay-order-search'>搜索交易明细 Pay order search</h3><pre class="highlight plaintext"><code>Post /cms/pooul_bills/search_order?
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST /cms/pooul_bills/search_order?merchant_id<span class="o">=</span>9609932494323355&amp;desc<span class="o">=</span>1&amp;time_start<span class="o">=</span>1531115400&amp;time_end<span class="o">=</span>1531115700 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d <span class="s1">'{
    "pay_type": "wechat.micro",
    "trade_state": 0
}'</span>
</code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b43125401c9114d83865b88"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ns::PayOrder::Wechat"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"auth_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"134725320299883049"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex Test Micro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531122260</span><span class="p">,</span><span class="w">
            </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.micro.91"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wechat.micro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">221</span><span class="p">,</span><span class="w">
            </span><span class="s2">"settle_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
            </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">222</span><span class="p">,</span><span class="w">
            </span><span class="s2">"trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531122302</span><span class="p">,</span><span class="w">
            </span><span class="s2">"merchant_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"business_short_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"平克文化"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"corporate_full_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b42f81801c911417df535ca"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ns::PayOrder::Wechat"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"attach"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex attach Test"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex Test Wechat micro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531115544</span><span class="p">,</span><span class="w">
            </span><span class="s2">"device_info"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alex wechat device"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.micro.146"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"notify_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://112.74.184.236:3006/fake-recv"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"op_user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"openid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oRXdVs59x_E6nVTBHXHkuSjsNVKw"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"out_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4200000123201807097783379411"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wechat.micro"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"settle_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
            </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
            </span><span class="s2">"trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
            </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531115571</span><span class="p">,</span><span class="w">
            </span><span class="s2">"merchant_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5399355381712172"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"business_short_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"平克文化"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"corporate_full_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>URL参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>要查询的商户编号</td>
</tr>
<tr>
<td>desc</td>
<td>留空则返回本商户汇总，desc=1则返回下属商户汇总</td>
</tr>
<tr>
<td>time_start</td>
<td>开始时间，支付创建时间，不传默认为查询当天0点，格式为unix时间戳，10位，如：1531115400</td>
</tr>
<tr>
<td>time_end</td>
<td>结束时间，支付创建时间，不传默认为截止到当前时间，格式为unix时间戳，10位，如：1531115700</td>
</tr>
</tbody></table>

<p>Body参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>要查询的下属商户编号</td>
</tr>
<tr>
<td>pay_type</td>
<td>支付类型，<a href="#pay-type">查看支付类型编码</a></td>
</tr>
<tr>
<td>trade_state</td>
<td>支付状态</td>
</tr>
<tr>
<td>mch_trade_id</td>
<td>商户支付订单号</td>
</tr>
<tr>
<td>_id</td>
<td>trade_id，普尔平台支付订单号</td>
</tr>
</tbody></table>
<h3 id='7c89f05a33'>获取单笔订单详情</h3><pre class="highlight plaintext"><code>GET /cms/pooul_bills/trade_detail?
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET /cms/pooul_bills/trade_detail?trade_id<span class="o">=</span>5b44cb1101c9117d49d357bb <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> 
</code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b44cb1101c9117d49d357bb"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ns::PayOrder::Wechat"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"auth_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"134628759621503841"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Alex Test Micro"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531235089</span><span class="p">,</span><span class="w">
        </span><span class="s2">"mch_trade_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"alextest.micro.97"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1333259781809471"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pay_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wechat.micro"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">299</span><span class="p">,</span><span class="w">
        </span><span class="s2">"settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">298</span><span class="p">,</span><span class="w">
        </span><span class="s2">"settle_rate"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
        </span><span class="s2">"spbill_create_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">299</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"trade_state"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
        </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531307455</span><span class="p">,</span><span class="w">
        </span><span class="s2">"merchant_info"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"merchant_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1333259781809471"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"business_short_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"平克福田梅林"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"corporate_full_name"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"pay_route"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">51</span><span class="p">,</span><span class="w">
            </span><span class="s2">"_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ns::PayRoute::Wechat"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"channel_mch_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1353760602"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"refunds"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5b45e5be01c9113bfa520c4a"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1531307454</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">299</span><span class="p">,</span><span class="w">
                </span><span class="s2">"refund_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SUCCESS"</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>URL参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>trade_id</td>
<td>普尔平台订单编号</td>
</tr>
</tbody></table>
<h2 id='summary'>获取交易汇总 Summary</h2>
<p>主要分为三种维度的汇总方式，</p>

<ul>
<li>实时交易汇总：指查询汇总当日0点至查询当时的交易金额汇总</li>
<li>日汇总：已对账完成的交易汇总，按日汇总</li>
<li>月汇总：已对账完成的交易汇总，按月汇总</li>
</ul>
<h3 id='today-summary'>实时汇总 Today summary</h3>
<blockquote>
<p>GET /cms/pooul_bills/today?merchant_id=9609932494323355&amp;desc=1</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4390</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4367</span><span class="p">,</span><span class="w">
            </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1960</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2420</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1377</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1370</span><span class="p">,</span><span class="w">
            </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">861</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">512</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"wechat.micro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">901</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">896</span><span class="p">,</span><span class="w">
            </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">563</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">335</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"wechat.jsapi"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2112</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2101</span><span class="p">,</span><span class="w">
            </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">536</span><span class="p">,</span><span class="w">
            </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1573</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>使用此接口可以查询当日0点到查询当前时间的交易汇总，分为pay_type各类型汇总与所有汇总，请求参数可以选择当前商户或是当前商户的下级所有商户交易记录汇总</p>

<p>请求方式：GET /cms/pooul_bills/today?</p>

<p>URL参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>要查询的商户编号</td>
</tr>
<tr>
<td>desc</td>
<td>留空则返回本商户汇总，desc=1则返回下属商户汇总</td>
</tr>
</tbody></table>
<h3 id='day-summary'>日汇总 Day summary</h3>
<blockquote>
<p>GET /cms/pooul_bills/day_summary?merchant_id=9609932494323355&amp;month=201807&amp;desc=1</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"2018-06-30"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9093</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9092</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">8872</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">220</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9093</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9092</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">8872</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">220</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"2018-06-29"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2113</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2102</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2102</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2113</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2102</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2102</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"2018-06-28"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"wechat.jsapi"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9961</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">9939</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">5720</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">4219</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">18530</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">18491</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">11394</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7097</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wechat.micro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2214</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2214</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2203</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">6355</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">6338</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3471</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2867</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"2018-06-27"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">710</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">708</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">218</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">12</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">490</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"common.micro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">487</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">486</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">208</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">278</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wechat.jsapi"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">206</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">205</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">205</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>使用此接口在请求中输入月份信息可以查询当月所有日期的交易汇总，分为pay_type各类型汇总与所有汇总，请求参数可以选择当前商户或是当前商户的下级所有商户交易记录汇总</p>

<p>请求方式：GET /cms/pooul_bills/day_summary?</p>

<p>URL参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>要查询的商户编号</td>
</tr>
<tr>
<td>desc</td>
<td>留空则返回本商户汇总，desc=1则返回下属商户汇总</td>
</tr>
<tr>
<td>month</td>
<td>月份，如：201807， 则返回2018年7月所有日期的交易汇总数据</td>
</tr>
</tbody></table>
<h3 id='month-summary'>月汇总 Month summary</h3>
<blockquote>
<p>GET /cms/pooul_bills/month_summary?merchant_id=9609932494323355&amp;year=2018&amp;desc=1</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"2018-07"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2608</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2595</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">352</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2243</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3831</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3811</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">352</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">3459</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wechat.micro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1223</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1216</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1216</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="s2">"2018-06"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"wechat.scan"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2143</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2137</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1050</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1087</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2316</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">2309</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1050</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1259</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"wechat.jsapi"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">166</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">165</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">165</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"common.micro"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"total_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_trade_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
                </span><span class="s2">"total_refund_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
                </span><span class="s2">"order_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
                </span><span class="s2">"amount_settle_fee"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>使用此接口在请求中输入年份信息可以查询当月所有月份的交易汇总，分为pay_type各类型汇总与所有汇总，请求参数可以选择当前商户或是当前商户的下级所有商户交易记录汇总</p>

<p>请求方式：GET /cms/pooul_bills/month_summary?</p>

<p>URL参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>要查询的商户编号</td>
</tr>
<tr>
<td>desc</td>
<td>留空则返回本商户汇总，desc=1则返回下属商户汇总</td>
</tr>
<tr>
<td>year</td>
<td>年份，如：2018， 则返回2018年所有月份的交易汇总数据</td>
</tr>
</tbody></table>
<h2 id='downloads-bills'>下载对账单 Downloads bills</h2><h3 id='day-bills'>日对账单 Day bills</h3>
<p>请求方式：GET /cms/pooul_bills/download_by_date?</p>

<p>URL参数说明</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id</td>
<td>要下载的商户编号</td>
</tr>
<tr>
<td>bill_date</td>
<td>要下载的对账单日期，如：20180706</td>
</tr>
</tbody></table>
<h3 id='049e654a9b'>对账单格式</h3>
<p>明细文件格式：</p>

<p>成功时，数据以文本表格的方式返回，第一行为表头，后面各行为对应的字段内容，字段内容跟查询订单或退款结果一致，具体字段说明可查阅相应接口。</p>

<p>第一行为表头：
创建时间 付款完成时间 支付单号 商户单号 原始单号 支付类型 商户编号 支付状态 结算状态 付款总金额 代金券金额 结算手续费率 结算手续费 应结算金额 退款单号 退款金额 代金券退款金额 退款状态 退款完成时间 订单标题(兼容支付宝) 商品描述 商家数据包 设备编号 操作员编号 公众号APPID 付款人信息 付款银行 货币种类</p>

<p>从第二行起，为数据记录
各参数以逗号分隔，字段顺序与表头一致。</p>

<p>汇总文件格式：</p>

<p>第一行为表头：
总订单笔数 总交易金额 结算手续费总金额 应结算总金额 总退款金额</p>

<p>从第二行起，为数据记录
各参数以逗号分隔，字段顺序与表头一致。</p>
<h1 id='tenant-merchants'>入驻商户 Tenant Merchants</h1><h2 id='merchant-level'>商户层级 Merchant Level</h2>
<p><img src="http://img.pooul.com/MerchantsLevels.png" alt="image" /></p>
<h2 id='merchant-manage'>商户管理 Merchant manage</h2><h3 id='fcbd093292'>创建</h3><h4 id='926f6b6b6a'>请求</h4><pre class="highlight plaintext"><code>POST /cms/merchants
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST /cms/merchants <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d <span class="s1">'{
    "merchant_type":3,
    "platform_merchant_id":"7590462217569167",
    "parent_id": "7590462217569167",
    "partner_mch_id": "988765",
    "note":"商户备注信息", 
    "license_type":1,
    "business":{
        "short_name":"平克文化",
        "service_call": "0755-82857285",
        "area_code":"440309",
        "province": "广东省",
        "urbn": "深圳市",
        "area": "龙华新区",
        "address": "龙华新区大浪办事处大浪社区新围村71栋101 "
    },
    "corporate":{
        "full_name":"深圳市平克茶业文化发展有限公司",
        "license_num":"91440300398456074L",
   },
    "owner":{
        "idcard_type": 1,
        "name": "雷晶晶",
        "idcard_num": ""
        "mobile": "15888888888"
    }
}'</span>
</code></pre>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_type <br> <strong>必填</strong> <br> <code>int</code></td>
<td>商户类型，固定值为 3</td>
</tr>
<tr>
<td>platform_merchant_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>平台商户编号，固定值为普尔为你开通的平台商户编号，如：7590462217569167</td>
</tr>
<tr>
<td>parent_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>父级商户编号，如为平台商户下属一级商户则为平台商户编号，如为一级一下商户则为该父级商户编号，如：7590462217569167</td>
</tr>
<tr>
<td>partner_mch_id <br> <strong>可选</strong> <br> <code>string</code></td>
<td>平台商户自定义商户编号，如：988765</td>
</tr>
<tr>
<td>note <br> <strong>可选</strong> <br> <code>string</code></td>
<td>商户备注信息</td>
</tr>
<tr>
<td>license_type <br> <strong>必填</strong> <br> <code>int</code></td>
<td>营业类型：1. 企业; 2. 个体工商户，3. 个人</td>
</tr>
<tr>
<td>business <br> <strong>可选</strong> <br> <code>string</code></td>
<td>商户经营信息参数集合，请参考<a href="#merchant-business">Merchant business 参数</a></td>
</tr>
<tr>
<td>corporate <br> <strong>可选</strong> <br> <code>string</code></td>
<td>营业执照信息参数集合，license_type为3时不需传，请参考<a href="#merchant-corporate">Merchant corporate 参数</a></td>
</tr>
<tr>
<td>owner <br> <strong>必填</strong> <br> <code>string</code></td>
<td>所有人/法人信息参数集合，license_type为3时为所有人信息，license_type为1、2时为营业执照法人信息，请参考<a href="#merchant-owner">Merchant owner 参数</a></td>
</tr>
</tbody></table>
<h5 id='merchant-business'>Merchant business 参数</h5>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>short_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户简称，经营名称，如：平克文化</td>
</tr>
<tr>
<td>service_call <br> <strong>可选</strong> <br> <code>string</code></td>
<td>服务电话，如：0755-82857285</td>
</tr>
<tr>
<td>area_code <br> <strong>可选</strong> <br> <code>string</code></td>
<td>行政区划代码，<a href="http://www.mca.gov.cn/article/sj/xzqh/2018/">参考民政部最新的区划代码</a>，如：440309</td>
</tr>
<tr>
<td>province <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营地址所在省，如：广东省</td>
</tr>
<tr>
<td>urbn <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营地址所在地级市，如：深圳市</td>
</tr>
<tr>
<td>area <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营地址所在区，如：龙华新区</td>
</tr>
<tr>
<td>address <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营详细地址，不含省市区，如：龙华新区大浪办事处大浪社区新围村71栋101</td>
</tr>
</tbody></table>
<h5 id='merchant-corporate'>Merchant corporate 参数</h5>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>full_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>企业全称，需为营业执照上企业全称，如：深圳市平克茶业文化发展有限公司&quot;,</td>
</tr>
<tr>
<td>license_num <br> <strong>必填</strong> <br> <code>string</code></td>
<td># 非三证合一为营业执照编码，三证合一为统一社会信用代码，如：91440300398456074L&quot;,</td>
</tr>
</tbody></table>
<h5 id='merchant-owner'>Merchant owner 参数</h5>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>idcard_type <br> <strong>必填</strong> <br> <code>string</code></td>
<td>身份证件类型，目前只支持身份证，固定值为1</td>
</tr>
<tr>
<td>name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>真实姓名</td>
</tr>
<tr>
<td>idcard_num <br> <strong>可选</strong> <br> <code>string</code></td>
<td>身份证号码</td>
</tr>
<tr>
<td>mobile <br> <strong>可选</strong> <br> <code>string</code></td>
<td>手机号码</td>
</tr>
</tbody></table>
<h4 id='f4eca6a6b0'>响应</h4>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5758247574437774"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ns::TenantMerchant"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>响应参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>_id <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户编号 merchant_id，可用于后续业务</td>
</tr>
</tbody></table>
<h3 id='711363c424'>查询</h3><pre class="highlight plaintext"><code>GET /cms/merchants/:_id
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET /cms/merchants/:_id <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9973450280059047"</span><span class="p">,</span><span class="w">
        </span><span class="err">……</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='c9c77517fe'>修改</h3><pre class="highlight plaintext"><code>PUT /cms/merchants/:_id
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT /cms/merchants/:_id <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d <span class="s1">'{
    "note":"商户备注信息"
}'</span>
</code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>note <br> <strong>可选</strong> <br> <code>string</code></td>
<td>商户备注信息</td>
</tr>
<tr>
<td>license_type <br> <strong>必填</strong> <br> <code>int</code></td>
<td>营业类型：1. 企业; 2. 个体工商户，3. 个人</td>
</tr>
<tr>
<td>business <br> <strong>可选</strong> <br> <code>string</code></td>
<td>商户经营信息参数集合，请参考<a href="#merchant-business">Merchant business 参数</a></td>
</tr>
<tr>
<td>corporate <br> <strong>可选</strong> <br> <code>string</code></td>
<td>营业执照信息参数集合，license_type为3时不需传，请参考<a href="#merchant-corporate">Merchant corporate 参数</a></td>
</tr>
<tr>
<td>owner <br> <strong>必填</strong> <br> <code>string</code></td>
<td>所有人/法人信息参数集合，license_type为3时为所有人信息，license_type为1、2时为营业执照法人信息，请参考<a href="#merchant-owner">Merchant owner 参数</a></td>
</tr>
</tbody></table>
<h5 id='merchant-business-2'>Merchant business 参数</h5>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>short_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>商户简称，经营名称，如：平克文化</td>
</tr>
<tr>
<td>service_call <br> <strong>可选</strong> <br> <code>string</code></td>
<td>服务电话，如：0755-82857285</td>
</tr>
<tr>
<td>area_code <br> <strong>可选</strong> <br> <code>string</code></td>
<td>行政区划代码，<a href="http://www.mca.gov.cn/article/sj/xzqh/2018/">参考民政部最新的区划代码</a>，如：440309</td>
</tr>
<tr>
<td>province <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营地址所在省，如：广东省</td>
</tr>
<tr>
<td>urbn <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营地址所在地级市，如：深圳市</td>
</tr>
<tr>
<td>area <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营地址所在区，如：龙华新区</td>
</tr>
<tr>
<td>address <br> <strong>可选</strong> <br> <code>string</code></td>
<td>经营详细地址，不含省市区，如：龙华新区大浪办事处大浪社区新围村71栋101</td>
</tr>
</tbody></table>
<h5 id='merchant-corporate-2'>Merchant corporate 参数</h5>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>full_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>企业全称，需为营业执照上企业全称，如：深圳市平克茶业文化发展有限公司&quot;,</td>
</tr>
<tr>
<td>license_num <br> <strong>必填</strong> <br> <code>string</code></td>
<td># 非三证合一为营业执照编码，三证合一为统一社会信用代码，如：91440300398456074L&quot;,</td>
</tr>
</tbody></table>
<h5 id='merchant-owner-2'>Merchant owner 参数</h5>
<table><thead>
<tr>
<th>请求参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>idcard_type <br> <strong>必填</strong> <br> <code>string</code></td>
<td>身份证件类型，目前只支持身份证，固定值为1</td>
</tr>
<tr>
<td>name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>真实姓名</td>
</tr>
<tr>
<td>idcard_num <br> <strong>可选</strong> <br> <code>string</code></td>
<td>身份证号码</td>
</tr>
<tr>
<td>mobile <br> <strong>可选</strong> <br> <code>string</code></td>
<td>手机号码</td>
</tr>
</tbody></table>
<h3 id='3755f56f2f'>删除</h3><pre class="highlight plaintext"><code>DELETE /cms/merchants/:_id
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE /cms/merchants/:_id <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h3 id='f04090805c'>搜索</h3><pre class="highlight plaintext"><code>POST /cms/merchants/search?
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST /cms/merchants/search?last_id<span class="o">=</span>:_id&amp;page_size<span class="o">=</span>30 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
-d <span class="s1">'{
    "parent_id": "9478629884842467"
}'</span>
</code></pre>
<blockquote>
<p>响应示例</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"success"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9973450280059047"</span><span class="p">,</span><span class="w">
            </span><span class="err">……</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="s2">"_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9906223241351263"</span><span class="p">,</span><span class="w">
            </span><span class="err">……</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>page_size <br> <strong>选填</strong></td>
<td>每页可以返回多少数据，限制范围是从 1~100 项，默认是 15 项。</td>
</tr>
<tr>
<td>last_id <br> <strong>选填</strong></td>
<td>在分页时使用的指针，决定了列表的第一项从何处开始。假设你的一次请求返回列表的最后一项的 id 是 obj_end，你可以使用 last_id = obj_end 去获取下一页。</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>_id <br> <strong>选填</strong></td>
<td>入驻商户编号（merchant_id）</td>
</tr>
<tr>
<td>parent_id <br> <strong>选填</strong></td>
<td>父级商户编号，输入此参数查询该父级商户所有下一级入驻商户</td>
</tr>
</tbody></table>
<h2 id='bank-cards'>银行卡 Bank cards</h2><h3 id='fcbd093292-2'>创建</h3><pre class="highlight plaintext"><code>POST /cms/bank_cards
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST /cms/bank_cards?merchnat_id<span class="o">=</span>4430405652527179 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d <span class="s1">'{
    "contact_tel":"18099992568",
    "owner_name":"梁中华",
    "bank_sub_code":"102584003247",
    "cyber_bank_code":"102100099996",
    "account_num":"4000032409200654834",
    "account_type":1,
    "owner_idcard":"91440300398456074L",
    "province":"广东",
    "urbn":"深圳",
    "zone":"福田",
    "bank_full_name": "中国工商银行股份有限公司深圳喜年支行",
    "cmbc_bank":false
}'</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户创建银行卡则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户绑定银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户绑定银行卡）</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>account_type <br> <strong>必填</strong> <br> <code>int</code></td>
<td>账户类型，0 个人、1 企业，默认为0</td>
</tr>
<tr>
<td>owner_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>户名，个人账户为真实姓名，企业账户为公司全称</td>
</tr>
<tr>
<td>account_num <br> <strong>必填</strong> <br> <code>string</code></td>
<td>银行账号， 如：6217680300228911</td>
</tr>
<tr>
<td>bank_full_name <br> <strong>必填</strong> <br> <code>string</code></td>
<td>银行全称，如：中信银行股份有限公司深圳香林支行</td>
</tr>
<tr>
<td>bank_sub_code <br> <strong>必填</strong> <br> <code>string</code></td>
<td>大小额联行号</td>
</tr>
<tr>
<td>contact_mobile  <br> <strong>可选</strong> <br> <code>string</code></td>
<td>个人帐户需留银行开户预留手机号，企业账户则为联系人手机号</td>
</tr>
<tr>
<td>province <br> <strong>可选</strong> <br> <code>string</code></td>
<td>开户省， 如：广东</td>
</tr>
<tr>
<td>urbn <br> <strong>可选</strong> <br> <code>string</code></td>
<td>开户市，如：深圳</td>
</tr>
<tr>
<td>area <br> <strong>可选</strong> <br> <code>string</code></td>
<td>开户区， 如：福田</td>
</tr>
<tr>
<td>cyber_bank_code <br> <strong>可选</strong> <br> <code>string</code></td>
<td>网银互联转账时的行号，<a href="#edde394695">参考</a></td>
</tr>
<tr>
<td>cmbc_bank <br> <strong>可选</strong> <br> <code>boolean</code></td>
<td>是否民生银行，true或false，默认：false</td>
</tr>
</tbody></table>
<h3 id='711363c424-2'>查询</h3><pre class="highlight plaintext"><code>GET /cms/bank_cards/:_id
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET /cms/bank_cards/23?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户操作银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户操作银行卡）</td>
</tr>
</tbody></table>
<h3 id='c9c77517fe-2'>修改</h3><pre class="highlight plaintext"><code>PUT /cms/bank_cards/:_id
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT /cms/bank_cards/23?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d <span class="s1">'{
    "contact_tel":"18099992568",
    "owner_name":"梁中华",
    "bank_sub_code":"102584003247",
    "cyber_bank_code":"102100099996",
    "account_num":"4000032409200654834",
    "account_type":1,
    "owner_idcard":"91440300398456074L",
    "province":"广东",
    "urbn":"深圳",
    "zone":"福田",
    "bank_full_name": "中国工商银行股份有限公司深圳喜年支行",
    "cmbc_bank":false
}'</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户操作银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户操作银行卡）</td>
</tr>
</tbody></table>
<h3 id='3755f56f2f-2'>删除</h3><pre class="highlight plaintext"><code>DELETE /cms/bank_cards/:_id
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X DELETE /cms/bank_cards/23?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户操作银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户操作银行卡）</td>
</tr>
</tbody></table>
<h3 id='43674fca93'>设置默认银行卡</h3><pre class="highlight plaintext"><code>PUT /cms/bank_cards/:_id/default_card
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT /cms/bank_cards/23/default_card?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户操作银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户操作银行卡）</td>
</tr>
</tbody></table>
<h3 id='97b5cbd70e'>查询商户所有银行卡</h3><pre class="highlight plaintext"><code>GET /cms/bank_cards
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET /cms/bank_cards?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X GET /cms/bank_cards?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户操作银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户操作银行卡）</td>
</tr>
</tbody></table>
<h3 id='729337a1e1'>启用禁用</h3><pre class="highlight plaintext"><code>PUT /cms/bank_cards/:_id/enable_disable/:true|false
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X PUT /cms/bank_cards/23/enable_disable/false?merchant_id<span class="o">=</span>1333259781809471 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>选填</strong></td>
<td>如Login的 Authorization 为当前商户则不需要传merchant_id（比如：入驻商户绑定的用户为自身商户操作银行卡），如果为当前商户的下级则需要传 merchant_id （比如：平台商户为入驻商户操作银行卡）</td>
</tr>
<tr>
<td>enable_disable</td>
<td>true为启用，false为禁用</td>
</tr>
</tbody></table>
<h2 id='a92269beba'>费率管理</h2><h3 id='fcbd093292-3'>创建</h3><pre class="highlight plaintext"><code>POST /cms/merchant_fee_rates
</code></pre>
<blockquote>
<p>请求示例</p>
</blockquote>
<pre class="highlight shell tab-shell"><code>curl -X POST /cms/merchant_fee_rates?merchnat_id<span class="o">=</span>4430405652527179 <span class="se">\</span>
-H <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
-H <span class="s2">"Authorization: #{Authorization}"</span> <span class="se">\</span>
-d <span class="s1">'{
    "pay_type": [wechat.scan，wechat.micro],
    "settle_rate": 50
}'</span>
</code></pre>
<p>URL请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>merchant_id <br> <strong>必填</strong></td>
<td>待修改的入驻商户编号</td>
</tr>
</tbody></table>

<p>Body请求参数</p>

<table><thead>
<tr>
<th>参数</th>
<th>描述</th>
</tr>
</thead><tbody>
<tr>
<td>pay_type <br> <strong>必填</strong> <br> <code>string</code></td>
<td>指定要创建费率的支付类型</td>
</tr>
<tr>
<td>settle_rate <br> <strong>必填</strong> <br> <code>int</code></td>
<td>结算费率，万分之，如：50，代表万分之50，千分之5，</td>
</tr>
</tbody></table>
<h3 id='711363c424-3'>查询</h3><pre class="highlight plaintext"><code>GET /cms/merchant_fee_rates/:_id
</code></pre><h3 id='c9c77517fe-3'>修改</h3><pre class="highlight plaintext"><code>PUT /cms/merchant_fee_rates/:_id
</code></pre><h3 id='3755f56f2f-3'>删除</h3><pre class="highlight plaintext"><code>DELETE /cms/merchant_fee_rates/:_id
</code></pre><h3 id='2801d5939d'>查询所有</h3><pre class="highlight plaintext"><code>GET /cms/merchant_fee_rates
</code></pre><h1 id='f8519014aa'>附录</h1><h2 id='pay-type'>Pay Type 支付类型编码</h2>
<table><thead>
<tr>
<th>pay_type</th>
<th>参数说明</th>
</tr>
</thead><tbody>
<tr>
<td>common.micro</td>
<td>统一反扫支付</td>
</tr>
<tr>
<td>wechat.scan</td>
<td>微信扫码支付</td>
</tr>
<tr>
<td>wechat.jsapi</td>
<td>微信公众号支付-原生</td>
</tr>
<tr>
<td>wechat.wap</td>
<td>微信WAP支付</td>
</tr>
<tr>
<td>wechat.app</td>
<td>微信APP支付</td>
</tr>
<tr>
<td>wechat.jsminipg</td>
<td>微信小程序支付</td>
</tr>
<tr>
<td>alipay.scan</td>
<td>支付宝正扫</td>
</tr>
<tr>
<td>alipay.jsapi</td>
<td>支付宝服务窗支付</td>
</tr>
<tr>
<td>alipay.wap</td>
<td>支付宝WAP支付</td>
</tr>
<tr>
<td>alipay.app</td>
<td>支付宝APP支付</td>
</tr>
</tbody></table>
<h2 id='edde394695'>网银互联联行号</h2>
<table><thead>
<tr>
<th>网银互联行号</th>
<th>银行名称</th>
</tr>
</thead><tbody>
<tr>
<td>402584009991</td>
<td>深圳农商行</td>
</tr>
<tr>
<td>313141052422</td>
<td>承德银行</td>
</tr>
<tr>
<td>313337009004</td>
<td>绍兴银行</td>
</tr>
<tr>
<td>313591001001</td>
<td>广东南粤银行</td>
</tr>
<tr>
<td>302100011000</td>
<td>中信银行</td>
</tr>
<tr>
<td>313452060150</td>
<td>青岛银行</td>
</tr>
<tr>
<td>313333007331</td>
<td>温州银行</td>
</tr>
<tr>
<td>313261000018</td>
<td>哈尔滨银行</td>
</tr>
<tr>
<td>301290000007</td>
<td>交通银行</td>
</tr>
<tr>
<td>403100000004</td>
<td>中国邮政储蓄银行</td>
</tr>
<tr>
<td>313345010019</td>
<td>浙江泰隆商业银行</td>
</tr>
<tr>
<td>313731010015</td>
<td>富滇银行</td>
</tr>
<tr>
<td>102100099996</td>
<td>中国工商银行</td>
</tr>
<tr>
<td>313655091983</td>
<td>自贡市商业银行</td>
</tr>
<tr>
<td>402521000032</td>
<td>湖北农信</td>
</tr>
<tr>
<td>313491000232</td>
<td>郑州银行</td>
</tr>
<tr>
<td>314305506621</td>
<td>常熟农村商业银行</td>
</tr>
<tr>
<td>402331000007</td>
<td>浙江省农村信用社</td>
</tr>
<tr>
<td>313227600018</td>
<td>葫芦岛银行</td>
</tr>
<tr>
<td>313882000012</td>
<td>昆仑银行</td>
</tr>
<tr>
<td>313305066661</td>
<td>苏州银行</td>
</tr>
<tr>
<td>309391000011</td>
<td>兴业银行</td>
</tr>
<tr>
<td>313336071575</td>
<td>湖州银行</td>
</tr>
<tr>
<td>313345001665</td>
<td>台州银行</td>
</tr>
<tr>
<td>313791030003</td>
<td>长安银行</td>
</tr>
<tr>
<td>313397075189</td>
<td>泉州银行</td>
</tr>
<tr>
<td>314581000011</td>
<td>广州农村商业银行</td>
</tr>
<tr>
<td>313455000018</td>
<td>东营市商业银行</td>
</tr>
<tr>
<td>313586000006</td>
<td>广东华兴银行</td>
</tr>
<tr>
<td>314305106644</td>
<td>太仓农商行</td>
</tr>
<tr>
<td>313456000108</td>
<td>烟台银行</td>
</tr>
<tr>
<td>313433076801</td>
<td>上饶银行</td>
</tr>
<tr>
<td>313659000016</td>
<td>绵阳市商业银行</td>
</tr>
<tr>
<td>596110000013</td>
<td>企业银行</td>
</tr>
<tr>
<td>313468000015</td>
<td>德州银行</td>
</tr>
<tr>
<td>307584007998</td>
<td>平安银行（原深圳发展银行）</td>
</tr>
<tr>
<td>313421087506</td>
<td>南昌银行</td>
</tr>
<tr>
<td>313168000003</td>
<td>晋城市商业银行</td>
</tr>
<tr>
<td>313521000011</td>
<td>汉口银行</td>
</tr>
<tr>
<td>402611099974</td>
<td>广西农村信用社（合作银行）</td>
</tr>
<tr>
<td>322290000011</td>
<td>上海农商银行</td>
</tr>
<tr>
<td>595100000007</td>
<td>新韩银行中国</td>
</tr>
<tr>
<td>313551088886</td>
<td>长沙银行</td>
</tr>
<tr>
<td>402871099996</td>
<td>黄河农村商业银行</td>
</tr>
<tr>
<td>104100000004</td>
<td>中国银行</td>
</tr>
<tr>
<td>313223007007</td>
<td>鞍山市商业银行</td>
</tr>
<tr>
<td>313393080005</td>
<td>厦门银行</td>
</tr>
<tr>
<td>313191000011</td>
<td>内蒙古银行</td>
</tr>
<tr>
<td>402241000015</td>
<td>吉林农村信用社</td>
</tr>
<tr>
<td>320345790018</td>
<td>浙江三门银座村镇银行</td>
</tr>
<tr>
<td>313504000010</td>
<td>漯河市商业银行</td>
</tr>
<tr>
<td>313701098010</td>
<td>贵阳银行</td>
</tr>
<tr>
<td>313301008887</td>
<td>南京银行</td>
</tr>
<tr>
<td>313617000018</td>
<td>桂林银行股份有限公司</td>
</tr>
<tr>
<td>314305206650</td>
<td>昆山农村商业银行</td>
</tr>
<tr>
<td>313656000019</td>
<td>攀枝花市商业银行</td>
</tr>
<tr>
<td>313791000015</td>
<td>西安银行</td>
</tr>
<tr>
<td>313228000276</td>
<td>营口银行</td>
</tr>
<tr>
<td>402301099998</td>
<td>江苏省农村信用社联合社</td>
</tr>
<tr>
<td>313451000019</td>
<td>齐鲁银行</td>
</tr>
<tr>
<td>303100000006</td>
<td>中国光大银行</td>
</tr>
<tr>
<td>314588000016</td>
<td>顺德农村商业银行</td>
</tr>
<tr>
<td>314305670002</td>
<td>张家港农村商业银行</td>
</tr>
<tr>
<td>320687000016</td>
<td>重庆黔江银座村镇银行</td>
</tr>
<tr>
<td>313473070018</td>
<td>临商银行</td>
</tr>
<tr>
<td>313290000017</td>
<td>上海银行</td>
</tr>
<tr>
<td>313493080539</td>
<td>洛阳银行</td>
</tr>
<tr>
<td>313301099999</td>
<td>江苏银行</td>
</tr>
<tr>
<td>402391000068</td>
<td>福建省农村信用社</td>
</tr>
<tr>
<td>308584000013</td>
<td>招商银行</td>
</tr>
<tr>
<td>310290000013</td>
<td>上海浦东发展银行</td>
</tr>
<tr>
<td>313131000016</td>
<td>邢台银行</td>
</tr>
<tr>
<td>402731057238</td>
<td>云南省农村信用社</td>
</tr>
<tr>
<td>313614000012</td>
<td>柳州银行</td>
</tr>
<tr>
<td>597100000014</td>
<td>韩亚银行</td>
</tr>
<tr>
<td>313611001018</td>
<td>广西北部湾银行</td>
</tr>
<tr>
<td>313138000019</td>
<td>张家口市商业银行</td>
</tr>
<tr>
<td>313585000990</td>
<td>珠海华润银行</td>
</tr>
<tr>
<td>313110000017</td>
<td>天津银行</td>
</tr>
<tr>
<td>313473200011</td>
<td>日照银行</td>
</tr>
<tr>
<td>313229000008</td>
<td>阜新银行</td>
</tr>
<tr>
<td>314305400015</td>
<td>吴江农村商业银行</td>
</tr>
<tr>
<td>593100000020</td>
<td>友利银行</td>
</tr>
<tr>
<td>320100010011</td>
<td>北京顺义银座村镇银行</td>
</tr>
<tr>
<td>314653000011</td>
<td>重庆农村商业银行</td>
</tr>
<tr>
<td>313161000017</td>
<td>晋商银行</td>
</tr>
<tr>
<td>313428076517</td>
<td>赣州银行</td>
</tr>
<tr>
<td>313581003284</td>
<td>广州银行</td>
</tr>
<tr>
<td>402332010004</td>
<td>鄞州银行</td>
</tr>
<tr>
<td>313821001016</td>
<td>兰州银行</td>
</tr>
<tr>
<td>105100000017</td>
<td>中国建设银行</td>
</tr>
<tr>
<td>313227000012</td>
<td>锦州银行</td>
</tr>
<tr>
<td>313127000013</td>
<td>邯郸市商业银行</td>
</tr>
<tr>
<td>319361000013</td>
<td>徽商银行</td>
</tr>
<tr>
<td>320584002002</td>
<td>深圳福田银座村镇银行</td>
</tr>
<tr>
<td>313100000013</td>
<td>北京银行</td>
</tr>
<tr>
<td>402602000018</td>
<td>东莞农村商业银行</td>
</tr>
<tr>
<td>313881000002</td>
<td>乌鲁木齐市商业银行</td>
</tr>
<tr>
<td>320343800019</td>
<td>浙江景宁银座村镇银行</td>
</tr>
<tr>
<td>313222080002</td>
<td>大连银行</td>
</tr>
<tr>
<td>313465000010</td>
<td>威海市商业银行</td>
</tr>
<tr>
<td>402641000014</td>
<td>海南省农村信用社</td>
</tr>
<tr>
<td>313506082510</td>
<td>商丘市商业银行</td>
</tr>
<tr>
<td>313205057830</td>
<td>鄂尔多斯银行</td>
</tr>
<tr>
<td>320428090311</td>
<td>江西赣州银座村镇银行</td>
</tr>
<tr>
<td>317110010019</td>
<td>天津农商银行</td>
</tr>
<tr>
<td>313331000014</td>
<td>杭州银行</td>
</tr>
<tr>
<td>313653000013</td>
<td>重庆银行</td>
</tr>
<tr>
<td>313871000007</td>
<td>宁夏银行</td>
</tr>
<tr>
<td>313345400010</td>
<td>浙江民泰商业银行</td>
</tr>
<tr>
<td>402451000010</td>
<td>山东省农联社</td>
</tr>
<tr>
<td>316331000018</td>
<td>浙商银行</td>
</tr>
<tr>
<td>313658000014</td>
<td>德阳银行</td>
</tr>
<tr>
<td>313146000019</td>
<td>廊坊银行</td>
</tr>
<tr>
<td>402100000018</td>
<td>北京农村商业银行</td>
</tr>
<tr>
<td>313463400019</td>
<td>莱商银行</td>
</tr>
<tr>
<td>313143005157</td>
<td>沧州银行</td>
</tr>
<tr>
<td>313391080007</td>
<td>福建海峡银行</td>
</tr>
<tr>
<td>313335081005</td>
<td>嘉兴银行</td>
</tr>
<tr>
<td>591110000016</td>
<td>外换银行（中国）有限公司</td>
</tr>
<tr>
<td>313332082914</td>
<td>宁波银行</td>
</tr>
<tr>
<td>313241066661</td>
<td>吉林银行</td>
</tr>
<tr>
<td>306581000003</td>
<td>广发银行</td>
</tr>
<tr>
<td>313461000012</td>
<td>济宁银行</td>
</tr>
<tr>
<td>313851000018</td>
<td>青海银行</td>
</tr>
<tr>
<td>103100000026</td>
<td>中国农业银行</td>
</tr>
<tr>
<td>320653000104</td>
<td>重庆渝北银座村镇银行</td>
</tr>
<tr>
<td>313602088017</td>
<td>东莞银行</td>
</tr>
<tr>
<td>313463000993</td>
<td>泰安市商业银行</td>
</tr>
<tr>
<td>313261099913</td>
<td>龙江银行</td>
</tr>
<tr>
<td>313312300018</td>
<td>江苏长江商行</td>
</tr>
<tr>
<td>313453001017</td>
<td>齐商银行</td>
</tr>
<tr>
<td>402361018886</td>
<td>安徽省农村信用社联合社</td>
</tr>
<tr>
<td>313513080408</td>
<td>南阳银行</td>
</tr>
<tr>
<td>313192000013</td>
<td>包商银行</td>
</tr>
<tr>
<td>315456000105</td>
<td>恒丰银行</td>
</tr>
<tr>
<td>304100040000</td>
<td>华夏银行</td>
</tr>
<tr>
<td>318110000014</td>
<td>渤海银行</td>
</tr>
<tr>
<td>313338707013</td>
<td>浙江稠州商业银行</td>
</tr>
<tr>
<td>313121006888</td>
<td>河北银行</td>
</tr>
<tr>
<td>313492070005</td>
<td>开封市商业银行</td>
</tr>
<tr>
<td>313458000013</td>
<td>潍坊银行</td>
</tr>
</tbody></table>
<h1 id='faq'>常见问题 FAQ</h1><h2 id='5537115284'>普通商户接入流程</h2>
<ol>
<li>签订合作协议，提交资料给商务对接人到支付渠道申请开通支付</li>
<li>使用测试商户信息进行接入<a href="#2e981dc65c">查看测试商户信息</a></li>
<li>替换为生产商户信息及生产环境网址等参数</li>
<li>上线生产验证</li>
</ol>
<h2 id='585a237901'>平台商户接入流程</h2>
<ol>
<li>签订合作协议，提交资料给商务对接人到支付渠道申请开通支付</li>
<li>从商务经理获取平台商户测试商户信息，使用测试商户信息进行接入</li>
<li>替换为生产商户信息及生产环境网址等参数</li>
<li>上线生产验证</li>
</ol>
<h1 id='update-log'>更新日志 Update log</h1>
<p><br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br>
 <br></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="shell">cURL</a>
          </div>
      </div>
    </div>
  </body>
</html>
